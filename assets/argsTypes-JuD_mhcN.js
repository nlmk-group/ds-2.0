import{r,j as n,R as k}from"./iframe-zk5xXBtA.js";import{T as R}from"./index-DjSUGs5w.js";import{T as A}from"./index-9BCGLlQQ.js";import{c as f}from"./clsx-B-dksMZM.js";import{C as P}from"./index-CsA5WfEK.js";import{I as M}from"./index-1zUxKm4P.js";const _=r.createContext({onColorChange:()=>{},color:{default:"initial"}});var m=(e=>(e.VIEW="VIEW",e.EDIT="EDIT",e))(m||{});const W="Legend-module__container___vuzq3",s={container:W,"color-container-view":"Legend-module__color-container-view___BM5TI","color-container-view--active":"Legend-module__color-container-view--active___LmFiV","color-container-view--selectable":"Legend-module__color-container-view--selectable___eCuQZ","color-container-edit":"Legend-module__color-container-edit___-Stp5","color-container-edit--open":"Legend-module__color-container-edit--open___tX1pS","color-container-edit--disabled":"Legend-module__color-container-edit--disabled___cQmsu","color-transition":"Legend-module__color-transition___eNlBS"},T=(e,u)=>{if(typeof e?.[u]!="function")return!1;const t=e?.[u]?.({color:e,onClick:()=>{},isOpen:!1,ref:{current:null}});return r.isValidElement(t)},H="root",b="legend-edit-color",$="DropdownLegend-module__menu___fjUtK",U="DropdownLegend-module__list___yPL7L",S={menu:$,list:U},h="legend-view-color",F=({color:e,onColorChange:u,isActive:t=!1,isSelectable:o=!1})=>{const l=f(s["color-container-view"],o?s["color-container-view--selectable"]:{},h);return e.viewColor?.({color:e,isActive:t,isSelectable:o,onColorChange:u,className:l})??null};try{F.displayName="LegendCustomViewColor",F.__docgenInfo={description:"",displayName:"LegendCustomViewColor",props:{isActive:{defaultValue:{value:"false"},description:"Выбран ли текущий цвет",name:"isActive",required:!1,type:{name:"boolean"}},isSelectable:{defaultValue:{value:"false"},description:"Отображение для выбора цвета",name:"isSelectable",required:!1,type:{name:"boolean"}},color:{defaultValue:null,description:"(CSS Цвет & Custom компонент) для отображения и выбора цвета",name:"color",required:!0,type:{name:"ILegendColor"}},onColorChange:{defaultValue:null,description:"Событие изменения цвета (val: ILegendColor) => void;",name:"onColorChange",required:!1,type:{name:"((val: ILegendColor) => void)"}}}}}catch{}const Q=(e,{isActive:u,isHover:t})=>{const o="var(--steel-80)";return e.default&&"supports"in CSS&&!CSS.supports("color",e.default)?o:[{check:t,result:e.hover},{check:u,result:e.active}].find(a=>a.check)?.result??e.default},I=({color:e,onColorChange:u,isActive:t=!1,isSelectable:o=!1})=>{const[l,a]=r.useState(!1),i=()=>{a(!0)},d=()=>{a(!1)},c=()=>{u?.(e)},C=f(s["color-container-view"],s["color-transition"],t?s["color-container-view--active"]:{},o?s["color-container-view--selectable"]:{},h),p=Q(e,{isHover:l,isActive:t});return n.jsx("div",{onClick:c,className:C,"data-testid":h,onMouseLeave:o?d:void 0,onMouseEnter:o?i:void 0,style:{backgroundColor:p},children:t?n.jsx(M,{htmlColor:"var(--steel-90)",name:"IconDoneCheckFilled16"}):null})};try{I.displayName="LegendViewColor",I.__docgenInfo={description:"",displayName:"LegendViewColor",props:{isActive:{defaultValue:{value:"false"},description:"Выбран ли текущий цвет",name:"isActive",required:!1,type:{name:"boolean"}},isSelectable:{defaultValue:{value:"false"},description:"Отображение для выбора цвета",name:"isSelectable",required:!1,type:{name:"boolean"}},color:{defaultValue:null,description:"(CSS Цвет & Custom компонент) для отображения и выбора цвета",name:"color",required:!0,type:{name:"ILegendColor"}},onColorChange:{defaultValue:null,description:"Событие изменения цвета (val: ILegendColor) => void;",name:"onColorChange",required:!1,type:{name:"((val: ILegendColor) => void)"}}}}}catch{}const z="",N="legend-view",g=({label:e,color:u,onColorChange:t,isWithoutLabel:o,isSelectable:l,isActive:a})=>{const{color:i,onColorChange:d}=r.useContext(_),c=r.useMemo(()=>u??i,[u,i]),C=r.useMemo(()=>t??d,[t,d]),y=T(c,"viewColor")?F:I;return n.jsxs("div",{"data-testid":N,className:f(s.container,N),children:[n.jsx(y,{onColorChange:C,color:c,isActive:a,isSelectable:l,"data-ui-legend-view":!0}),o?null:n.jsx(A,{variant:"Body1-Medium",children:e??z})]})};try{g.displayName="LegendView",g.__docgenInfo={description:"",displayName:"LegendView",props:{isWithoutLabel:{defaultValue:null,description:"Не отображать label",name:"isWithoutLabel",required:!1,type:{name:"boolean"}},isSelectable:{defaultValue:null,description:"Отображение для выбора цвета",name:"isSelectable",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"Текущий цвет",name:"isActive",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"Подпись у элемента Legend",name:"label",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"(CSS Цвет & Custom компонент) для отображения и выбора цвета",name:"color",required:!1,type:{name:"ILegendColor"}},onColorChange:{defaultValue:null,description:"Событие изменения цвета (val: ILegendColor) => void;",name:"onColorChange",required:!1,type:{name:"((val: ILegendColor) => void)"}}}}}catch{}const O="Выберите цвет / элемент",V=({divRef:e,setIsOpen:u})=>{const{color:t,withPortal:o,onColorChange:l,colorList:a,menuLabel:i,menuStyle:d}=r.useContext(_),c=e?.current?.getBoundingClientRect(),C=o?{...d,minWidth:c?.width,top:c?.bottom||0,left:c?.left||0}:d,p=r.useRef(null),y=()=>u(!1),D=e&&p?[e,p]:p,L=E=>{u(!1),l?.(E)};return n.jsx(P,{onClickAway:y,excludeRef:D,children:n.jsxs("div",{ref:p,className:S.menu,style:C,children:[n.jsx(A,{variant:"Body1-Bold",color:"var(--steel-90)",children:i??O}),n.jsx("div",{className:S.list,children:a?.map(E=>n.jsx(g,{onColorChange:L,color:E,isWithoutLabel:!0,isSelectable:!0,isActive:E.default===t.default},E.default))})]})})};try{V.displayName="DropdownLegend",V.__docgenInfo={description:"",displayName:"DropdownLegend",props:{divRef:{defaultValue:null,description:"Ref div Legend, для открытия Dropdown",name:"divRef",required:!0,type:{name:"RefObject<HTMLDivElement | null> | null"}},setIsOpen:{defaultValue:null,description:"Изменение state открытия Dropdown",name:"setIsOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}}}catch{}const v=({divRef:e,setIsOpen:u})=>{const{withPortal:t,portalContainerId:o=H}=r.useContext(_),l=r.useMemo(()=>document.getElementById(o),[o]),a=n.jsx(V,{divRef:e,setIsOpen:u});return t&&l?k.createPortal(a,l):a};try{v.displayName="Menu",v.__docgenInfo={description:"",displayName:"Menu",props:{divRef:{defaultValue:null,description:"divRef к которому привязать Dropdown",name:"divRef",required:!0,type:{name:"RefObject<HTMLDivElement | null> | null"}},setIsOpen:{defaultValue:null,description:"Изменение state открытия Dropdown",name:"setIsOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}}}catch{}const w=()=>{const e=r.useRef(null),{color:u,isDisabled:t}=r.useContext(_),[o,l]=r.useState(!1),a=()=>{l(d=>!d)},i=f(s["color-container-edit"],b);return n.jsxs("div",{style:{position:"relative"},children:[u.editColor?.({ref:e,color:u,isDisabled:t,onClick:a,isOpen:o,className:i})??null,o?n.jsx(v,{divRef:e,setIsOpen:l}):null]})};try{w.displayName="LegendCustomEditColor",w.__docgenInfo={description:"",displayName:"LegendCustomEditColor",props:{}}}catch{}const K=(e,{isDisabled:u,isOpen:t,isHover:o})=>{const l="var(--steel-80)";return e.default&&"supports"in CSS&&!CSS.supports("color",e.default)?l:[{check:u,result:e.default},{check:t,result:e.active},{check:o,result:e.hover}].find(i=>i.check)?.result??e.default},B=()=>{const{color:e,isDisabled:u}=r.useContext(_),t=r.useRef(null),[o,l]=r.useState(!1),[a,i]=r.useState(!1),d=()=>{i(!0)},c=()=>{i(!1)},C=D=>{D.stopPropagation(),l(L=>!L)},p=f(s["color-container-edit"],s["color-transition"],u?s["color-container-edit--disabled"]:{},o?s["color-container-edit--open"]:{},b),y=K(e,{isDisabled:u??!1,isOpen:o,isHover:a});return n.jsxs("div",{style:{position:"relative"},children:[n.jsx("div",{ref:t,onClick:u?void 0:C,className:p,"data-testid":b,onMouseLeave:c,onMouseEnter:d,style:{backgroundColor:y},children:n.jsx(M,{"data-ui-legend-edit-icon":!0,htmlColor:"var(--steel-90)",style:u?{opacity:"0.3"}:void 0,name:"IconChevronArrowDownOutlined24"})}),o?n.jsx(v,{divRef:t,setIsOpen:l}):null]})};try{B.displayName="LegendEditColor",B.__docgenInfo={description:"",displayName:"LegendEditColor",props:{}}}catch{}const X="",j="legend-edit",x=({label:e})=>{const{color:u}=r.useContext(_),o=T(u,"editColor")?w:B;return n.jsxs("div",{"data-testid":j,className:f(s.container,j),children:[n.jsx(o,{"data-ui-legend-edit":!0}),n.jsx(A,{variant:"Body1-Medium",children:e??X})]})};try{x.displayName="LegendEdit",x.__docgenInfo={description:"",displayName:"LegendEdit",props:{label:{defaultValue:null,description:"Подпись у элемента Legend",name:"label",required:!1,type:{name:"string"}}}}}catch{}const q=({type:e=m.VIEW,label:u,tooltipText:t="",...o})=>n.jsx(_.Provider,{value:o,children:n.jsxs(R,{title:t,children:[e===m.VIEW?n.jsx(g,{"data-ui-legend-view-container":!0,label:u}):null,e===m.EDIT?n.jsx(x,{"data-ui-legend-edit-container":!0,label:u}):null]})});try{q.displayName="Legend",q.__docgenInfo={description:"Компонент Legend используется для настройки цветов в таблицах/графике, и их отображение списком.",displayName:"Legend",props:{color:{defaultValue:null,description:"(CSS Цвет & Custom компонент) для отображения и выбора цвета",name:"color",required:!0,type:{name:"ILegendColor"}},colorList:{defaultValue:null,description:"(CSS Цвет & Custom компонент) список цвета для выбора",name:"colorList",required:!1,type:{name:"ILegendColor[]"}},type:{defaultValue:{value:"ELegendType.VIEW"},description:"Тип компонента (ELegendType.VIEW | ELegendType.EDIT)",name:"type",required:!1,type:{name:"enum",value:[{value:'"VIEW"'},{value:'"EDIT"'}]}},label:{defaultValue:null,description:"Подпись у элемента Legend",name:"label",required:!1,type:{name:"string"}},withPortal:{defaultValue:null,description:"Dropdown - Использоваться createPortal для отображения DropdownMenu",name:"withPortal",required:!1,type:{name:"boolean"}},portalContainerId:{defaultValue:null,description:"Dropdown - ID Контейнера для использования createPortal",name:"portalContainerId",required:!1,type:{name:"string"}},menuStyle:{defaultValue:null,description:"Dropdown - Стили DropdownMenu",name:"menuStyle",required:!1,type:{name:"CSSProperties"}},menuLabel:{defaultValue:null,description:"Dropdown - Подпись при выборе цвета",name:"menuLabel",required:!1,type:{name:"string"}},onColorChange:{defaultValue:null,description:"Событие изменения цвета (val: ILegendColor) => void;",name:"onColorChange",required:!1,type:{name:"((val: ILegendColor) => void)"}},tooltipText:{defaultValue:{value:""},description:"Tooltip - текст",name:"tooltipText",required:!1,type:{name:"string"}},isDisabled:{defaultValue:null,description:"Запрет редактирования",name:"isDisabled",required:!1,type:{name:"boolean"}}}}}catch{}const oe={type:{description:`Тип отображения элемента – <b>${Object.values(m).join(" | ")}</b>.`,table:{defaultValue:{summary:m.VIEW},type:{summary:Object.values(m).join(" | ")}},options:Object.values(m),control:{type:"select"}},color:{description:"Объект цвета элемента",table:{type:{summary:"object"}},control:{type:"object"}},colorList:{description:"Массив объектов цвета для выбора",table:{type:{summary:"object"}},control:{type:"object"}},label:{description:"Подпись элемента",table:{defaultValue:{summary:""},type:{summary:"string"}},control:{type:"text"}},withPortal:{description:"Отрисовывать Dropdown с выбором цвета через ReactPortal",table:{type:{summary:"boolean"}},control:{type:"boolean"}},portalContainerId:{description:"ID рутового контейнера для создания портала",table:{type:{summary:"string"}},control:{type:"text"}},menuStyle:{description:"Стили (CSSProperties) для Dropdown menu, который выводит цвета",table:{type:{summary:"object"}},control:{type:"object"}},menuLabel:{description:"Подпись меню при выборе текста",table:{defaultValue:{summary:O},type:{summary:"string"}},control:{type:"text"}},onColorChange:{description:"Callback при изменении выбранного цвета",action:"Изменено color"},tooltipText:{description:"Текста подскади при наведении на компонент",table:{type:{summary:"string"}},control:{type:"text"}},isDisabled:{description:"Заблокировать выбор цвета",table:{type:{summary:"boolean"}},control:{type:"boolean"}}};export{m as E,q as L,oe as a};
