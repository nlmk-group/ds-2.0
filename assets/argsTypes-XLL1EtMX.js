import{j as a,r as n,e as fe,m as ye}from"./iframe-CxLN9ksd.js";import{u as he}from"./useFloatingReferenceSync-DscYnpdV.js";import{T as be}from"./index-C9nyZABc.js";import{u as Ve,a as Ce,o as Se,f as ge,s as xe,l as _e}from"./floating-ui.react-B9Baa2-L.js";import{c as O}from"./clsx-B-dksMZM.js";import{I as P}from"./index-M8Uj9-kW.js";import{I as we}from"./index-BN0H6Yla.js";function N(e){const o=n.createContext(null),r=n.createContext(null);return{useState(){return n.useContext(o)},useSetState(){return n.useContext(r)},Provider({children:u}){const[d,f]=n.useState(e??null);return a.jsx(o.Provider,{value:d,children:a.jsx(r.Provider,{value:f,children:u})})}}}const qe=e=>e.reduce((r,u)=>{const d=({children:f})=>a.jsx(r,{children:a.jsx(u,{children:f})});return d.displayName="ComposedProvider",d}),G=N(),A=N(),J=N([]),U=N(""),B=qe([G.Provider,A.Provider,J.Provider,U.Provider]),{useState:ve,useSetState:Ie}=G,{useState:Ne,useSetState:We}=A,{useState:Ee,useSetState:De}=J,{useState:Je,useSetState:Ue}=U;try{B.displayName="Provider",B.__docgenInfo={description:"",displayName:"Provider",props:{}}}catch{}const Oe="ResizableGrip-module__resizable___4JrS2",Pe={resizable:Oe},M=({minWidth:e,minHeight:o,containerRef:r})=>{const u=Ie(),d=We(),f=()=>{const p=r.current;let c=null,h=null;const C=i=>{const g=i.clientX,x=i.clientY;if(p){const t=p.offsetWidth,m=p.offsetHeight,b=c?g-c:0,V=h?x-h:0;t+b>e&&(p.style.width=`${t+b}px`,c=g),t+b<e&&d&&d(t+b),m+V>o&&(p.style.height=`${m+V}px`,h=x),m+V>o&&u&&u({minHeight:o,optimalHeight:m+V}),c||(c=g),h||(h=x)}},S=()=>{document.removeEventListener("mouseup",S),document.removeEventListener("mousemove",C)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",S)};return a.jsx("div",{className:Pe.resizable,onMouseDown:f,children:a.jsx(P,{color:"primary",name:"IconResizingOutlined16"})})};try{M.displayName="ResizableGrip",M.__docgenInfo={description:"",displayName:"ResizableGrip",props:{minWidth:{defaultValue:null,description:"",name:"minWidth",required:!0,type:{name:"number"}},minHeight:{defaultValue:null,description:"",name:"minHeight",required:!0,type:{name:"number"}},containerRef:{defaultValue:null,description:"",name:"containerRef",required:!0,type:{name:"RefObject<HTMLDivElement | null>"}}}}}catch{}const Be=()=>{const[e,o]=n.useState(!1),r=n.useCallback(()=>o(!0),[]),u=n.useCallback(()=>o(!1),[]);return{isOpen:e,openModal:r,closeModal:u}},Me="ComboBox-module__fullWidth___JuvyF",je="ComboBox-module__input___WEkkS",He="ComboBox-module__inputIcon___mgFcJ",Re="ComboBox-module__dropdown___XE7sn",ke="ComboBox-module__tooltipWrapper___XXBr4",ze="ComboBox-module__popupText___4LoGv",w={fullWidth:Me,input:je,inputIcon:He,dropdown:Re,tooltipWrapper:ke,popupText:ze},D=e=>e.length===0?"":e.length>1?`Выбрано ${e.length}`:`${e[0]?.label}`,j=({inputRef:e,isDisabled:o,isOpen:r,label:u,onFocusSearchInput:d,onOpenClick:f,value:p,initialValue:c,onCloseClick:h,displayEnumerated:C,displayChildCount:S,countOnlyLevel:i,className:g,style:x})=>{const t=Ee(),m=De(),b=n.useCallback(()=>{o||(r?h():f())},[r,o]),V=n.useMemo(()=>{if(t&&t.length>1&&S){const s=t.filter(y=>y.parentId);return D(s)}if(t&&t.length>1&&i)if(i===-1){const s=new Set;t.forEach(_=>{_.parentId&&s.add(_.parentId)});const y=t.filter(_=>!s.has(_.id));return D(y)}else{const s=t.filter(y=>y.level===i);return D(s)}if(t&&t.length>1&&C)return t.reduce((s,y)=>`${s}${s?", ":""}${y.label}`,"");if(t&&t.length>1)return`Выбрано ${t.length}`;if(t){const[s]=t;return s?.label??""}return""},[t,S,i,C]);return n.useEffect(()=>{m&&c&&m(c)},[]),n.useEffect(()=>{m&&p&&m(p)},[p]),a.jsx(we,{inputRef:e,disabled:o,value:V,className:O(w.input,g),label:u,readOnly:!0,onFocus:d,icon:a.jsx("div",{className:w.inputIcon,onClick:b,children:r?a.jsx(P,{name:"IconChevronArrowUpOutlined24"}):a.jsx(P,{name:"IconChevronArrowDownOutlined24"})}),style:x})};try{j.displayName="InputComboBox",j.__docgenInfo={description:"",displayName:"InputComboBox",props:{inputRef:{defaultValue:null,description:"",name:"inputRef",required:!0,type:{name:"RefObject<HTMLInputElement | null>"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!0,type:{name:"boolean"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},initialValue:{defaultValue:null,description:"",name:"initialValue",required:!1,type:{name:"IComboBoxOption[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"IComboBoxOption[]"}},onFocusSearchInput:{defaultValue:null,description:"",name:"onFocusSearchInput",required:!0,type:{name:"() => void"}},onOpenClick:{defaultValue:null,description:"",name:"onOpenClick",required:!0,type:{name:"() => void"}},onCloseClick:{defaultValue:null,description:"",name:"onCloseClick",required:!0,type:{name:"() => void"}},displayEnumerated:{defaultValue:null,description:"",name:"displayEnumerated",required:!1,type:{name:"boolean"}},displayChildCount:{defaultValue:null,description:"",name:"displayChildCount",required:!1,type:{name:"boolean"}},countOnlyLevel:{defaultValue:null,description:"",name:"countOnlyLevel",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}}}catch{}const H=({children:e,label:o,isDisabled:r=!1,isResize:u=!1,dropdownWidth:d,dropdownHeight:f,dropdownMinWidth:p,dropdownMinHeight:c,initialValue:h,displayEnumerated:C=!1,displayChildCount:S=!1,tooltipDescription:i,countOnlyLevel:g=0,className:x,style:t,dropdownClassName:m,dropdownStyle:b,inputClassName:V,inputStyle:s,withPortal:y=!1,portalContainerId:_="root",autoFocusSearch:Y=!1,autoExpandOnSearch:K=!1})=>{const R=Ne()??150,v=ve(),Q=v?v.optimalHeight:200,Z=v?v.minHeight:150,{isOpen:I,openModal:k,closeModal:z}=Be(),q=n.useRef(null),W=n.useRef(null),E=n.useRef(null),[ee,te]=n.useState(null),[ne,ae]=n.useState(!1),oe=p||R,le=c||Q,F=Math.max(oe,q.current?.offsetWidth||0),re=Math.max(le,q.current?.offsetHeight||0),{refs:ie,floatingStyles:se,placement:ue}=Ve({placement:"bottom-start",middleware:[Se(4),ge({fallbackPlacements:["top-start"]}),xe({limiter:_e(),padding:8})],whileElementsMounted:Ce});he(W,ee,ie,ae);const L=l=>{const ce=W.current?.contains(l.target)??!1,me=E.current?.contains(l.target)??!1;!ce&&!me&&z()};n.useEffect(()=>(document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}),[]);const de=()=>{const l={height:f||re,width:d||F,minWidth:q.current?.offsetWidth??F,visibility:ne?"visible":"hidden"};return y?{...l,...se,...b}:{...l,position:"absolute",left:0,right:0,zIndex:1e3,marginTop:"4px",...b}},T=a.jsx(j,{inputRef:q,isDisabled:r,isOpen:I,label:o,onFocusSearchInput:k,onOpenClick:k,onCloseClick:z,initialValue:h,displayEnumerated:C,displayChildCount:S,countOnlyLevel:g,className:V,style:s}),pe=fe.Children.map(e,l=>n.isValidElement(l)&&typeof l.type!="string"?n.cloneElement(l,{autoFocusSearch:Y,autoExpandOnSearch:K,isDropdownOpen:I}):l),$=I&&a.jsxs("div",{ref:l=>{E.current=l,l&&te(l)},className:O(w.dropdown,m),style:de(),"data-popper-placement":ue,children:[u&&a.jsx(M,{containerRef:E,minWidth:q.current?.offsetWidth??R,minHeight:Z}),pe]});return a.jsxs("div",{className:O(w.fullWidth,x),style:t,ref:W,children:[i&&i.length>0?a.jsx(be,{className:w.tooltipWrapper,popupClassName:w.popupText,placement:"bottom",behavior:"hover",description:Array.isArray(i)?i.map(l=>l.label).join(", "):i,clickable:!0,children:T}):T,y&&I?ye.createPortal($,document.getElementById(_)||document.body):$]})};try{H.displayName="ComboBoxDropdown",H.__docgenInfo={description:"",displayName:"ComboBoxDropdown",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},isDisabled:{defaultValue:{value:"false"},description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},isResize:{defaultValue:{value:"false"},description:"",name:"isResize",required:!1,type:{name:"boolean"}},dropdownWidth:{defaultValue:null,description:"",name:"dropdownWidth",required:!1,type:{name:"string | number"}},dropdownHeight:{defaultValue:null,description:"",name:"dropdownHeight",required:!1,type:{name:"string | number"}},dropdownMinHeight:{defaultValue:null,description:"",name:"dropdownMinHeight",required:!1,type:{name:"number"}},dropdownMinWidth:{defaultValue:null,description:"",name:"dropdownMinWidth",required:!1,type:{name:"number"}},inputMinWidth:{defaultValue:null,description:"",name:"inputMinWidth",required:!1,type:{name:"number"}},initialValue:{defaultValue:null,description:"",name:"initialValue",required:!1,type:{name:"IComboBoxOption[]"}},displayEnumerated:{defaultValue:{value:"false"},description:"",name:"displayEnumerated",required:!1,type:{name:"boolean"}},displayChildCount:{defaultValue:{value:"false"},description:"",name:"displayChildCount",required:!1,type:{name:"boolean"}},tooltipDescription:{defaultValue:null,description:"",name:"tooltipDescription",required:!1,type:{name:"string | IComboBoxOption[]"}},countOnlyLevel:{defaultValue:{value:"0"},description:"",name:"countOnlyLevel",required:!1,type:{name:"number"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},dropdownClassName:{defaultValue:null,description:"",name:"dropdownClassName",required:!1,type:{name:"string"}},dropdownStyle:{defaultValue:null,description:"",name:"dropdownStyle",required:!1,type:{name:"CSSProperties"}},inputClassName:{defaultValue:null,description:"",name:"inputClassName",required:!1,type:{name:"string"}},inputStyle:{defaultValue:null,description:"",name:"inputStyle",required:!1,type:{name:"CSSProperties"}},withPortal:{defaultValue:{value:"false"},description:"",name:"withPortal",required:!1,type:{name:"boolean"}},portalContainerId:{defaultValue:{value:"root"},description:"",name:"portalContainerId",required:!1,type:{name:"string"}},autoFocusSearch:{defaultValue:{value:"false"},description:"",name:"autoFocusSearch",required:!1,type:{name:"boolean"}},autoExpandOnSearch:{defaultValue:{value:"false"},description:"",name:"autoExpandOnSearch",required:!1,type:{name:"boolean"}}}}}catch{}const X=e=>a.jsx(B,{children:a.jsx(H,{...e})});try{X.displayName="ComboBox",X.__docgenInfo={description:"",displayName:"ComboBox",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},isResize:{defaultValue:null,description:"",name:"isResize",required:!1,type:{name:"boolean"}},dropdownWidth:{defaultValue:null,description:"",name:"dropdownWidth",required:!1,type:{name:"string | number"}},dropdownHeight:{defaultValue:null,description:"",name:"dropdownHeight",required:!1,type:{name:"string | number"}},dropdownMinHeight:{defaultValue:null,description:"",name:"dropdownMinHeight",required:!1,type:{name:"number"}},dropdownMinWidth:{defaultValue:null,description:"",name:"dropdownMinWidth",required:!1,type:{name:"number"}},inputMinWidth:{defaultValue:null,description:"",name:"inputMinWidth",required:!1,type:{name:"number"}},initialValue:{defaultValue:null,description:"",name:"initialValue",required:!1,type:{name:"IComboBoxOption[]"}},displayEnumerated:{defaultValue:null,description:"",name:"displayEnumerated",required:!1,type:{name:"boolean"}},displayChildCount:{defaultValue:null,description:"",name:"displayChildCount",required:!1,type:{name:"boolean"}},tooltipDescription:{defaultValue:null,description:"",name:"tooltipDescription",required:!1,type:{name:"string | IComboBoxOption[]"}},countOnlyLevel:{defaultValue:null,description:"",name:"countOnlyLevel",required:!1,type:{name:"number"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},dropdownClassName:{defaultValue:null,description:"",name:"dropdownClassName",required:!1,type:{name:"string"}},dropdownStyle:{defaultValue:null,description:"",name:"dropdownStyle",required:!1,type:{name:"CSSProperties"}},inputClassName:{defaultValue:null,description:"",name:"inputClassName",required:!1,type:{name:"string"}},inputStyle:{defaultValue:null,description:"",name:"inputStyle",required:!1,type:{name:"CSSProperties"}},withPortal:{defaultValue:null,description:"",name:"withPortal",required:!1,type:{name:"boolean"}},portalContainerId:{defaultValue:null,description:"",name:"portalContainerId",required:!1,type:{name:"string"}},autoFocusSearch:{defaultValue:null,description:"",name:"autoFocusSearch",required:!1,type:{name:"boolean"}},autoExpandOnSearch:{defaultValue:null,description:"",name:"autoExpandOnSearch",required:!1,type:{name:"boolean"}}}}}catch{}const Ye={label:{description:"Метка компонента ComboBox",control:{type:"text"},defaultValue:"Выберите опцию"},isDisabled:{description:"Отключает возможность взаимодействия с компонентом",control:{type:"boolean"},defaultValue:!1},isResize:{description:"Включает возможность изменения размера выпадающего списка",control:{type:"boolean"},defaultValue:!1},dropdownWidth:{description:"Ширина выпадающего списка (в пикселях или %)",control:{type:"text"},defaultValue:""},dropdownHeight:{description:"Высота выпадающего списка (в пикселях или %)",control:{type:"text"},defaultValue:""},dropdownMinHeight:{description:"Минимальная высота выпадающего списка",control:{type:"number"},defaultValue:150},dropdownMinWidth:{description:"Минимальная ширина выпадающего списка",control:{type:"number"},defaultValue:150},inputMinWidth:{description:"Минимальная ширина поля ввода",control:{type:"number"},defaultValue:150},initialValue:{description:"Начальное выбранное значение (массив объектов Option)",control:{type:"object"},defaultValue:[]},children:{description:"Содержимое выпадающего списка (например, список опций)",control:{type:"object"}},displayEnumerated:{description:"Отображать выбранные элементы в виде перечисления",control:{type:"boolean"},defaultValue:!1},displayChildCount:{description:"Отображать количество дочерних элементов (при множественном выборе)",control:{type:"boolean"},defaultValue:!1},tooltipDescription:{description:"Описание для всплывающей подсказки, может быть строкой или массивом Option",control:{type:"text"},defaultValue:""},countOnlyLevel:{description:"Уровень, для которого производится подсчет выбранных элементов",control:{type:"number"},defaultValue:0},color:{description:"Цветовая схема компонента (например, primary, secondary и т.д.)",control:{type:"text"},defaultValue:"primary"},className:{description:"Дополнительный CSS класс для корневого элемента",control:{type:"text"},defaultValue:""},style:{description:"Дополнительные CSS стили для корневого элемента",control:{type:"object"},defaultValue:{}},dropdownClassName:{description:"Дополнительный CSS класс для выпадающего списка",control:{type:"text"},defaultValue:""},dropdownStyle:{description:"Дополнительные CSS стили для выпадающего списка",control:{type:"object"},defaultValue:{}},inputClassName:{description:"Дополнительный CSS класс для поля ввода",control:{type:"text"},defaultValue:""},inputStyle:{description:"Дополнительные CSS стили для поля ввода",control:{type:"object"},defaultValue:{}},autoFocusSearch:{description:"Автоматический фокус на поиске при открытии выпадающего списка",control:{type:"boolean"},defaultValue:!1},autoExpandOnSearch:{description:"Автоматическое раскрытие дерева элементов при поиске",control:{type:"boolean"},defaultValue:!1}};export{X as C,B as P,Ye as a,De as b,Ie as c,We as d,Ue as e,ve as f,Je as g,Ee as u};
