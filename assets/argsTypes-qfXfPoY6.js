import{r as t,j as a,m as yu}from"./iframe-CxLN9ksd.js";import{c as Q}from"./colorsMapping-C6bFIk14.js";import{s as X}from"./sizeMappingInput-XXScYzk1.js";import{A as Du}from"./index-Qhn2sPqo.js";import{I as Bu}from"./index-BN0H6Yla.js";import{c as tu}from"./clsx-B-dksMZM.js";import{u as bu}from"./useFloatingReferenceSync-DscYnpdV.js";import{L as Cu}from"./index-CosC_TVD.js";import{B as hu}from"./index-CT_Q_AhL.js";import{T as lu}from"./index-CORENSTS.js";import{I as Au}from"./index-M8Uj9-kW.js";import{C as Fu}from"./index-CYd80pzx.js";import{O as gu}from"./index-B5AbqdmT.js";import{u as Su,a as xu,o as Vu,f as vu,s as Iu,l as wu}from"./floating-ui.react-B9Baa2-L.js";import{g as _u}from"./generateUUID-M57HTP56.js";const qu="MultiSelect-module__multiSelect___o4oIn",nu={multiSelect:qu},Ou=5,ru=t.createContext(null),Mu=()=>{const n=t.useContext(ru);if(!n)throw new Error("useMultiSelectContext must be used within MultiSelectContext.Provider");return n},Tu="Options-module__options___8VmvA",ou={options:Tu,"not-found-item":"Options-module__not-found-item___O2xJQ"},Pu={m:40,s:32,xs:32},Ru=16,Y=({children:n,menuStyle:p})=>{const{isOpen:c,inputRef:B,arrowButtonRef:P,menuWidth:R,withPortal:V,menuRef:b,portalContainerId:v,scrollingItems:L,setIsOpen:m,setFocusedIndex:j,focusedIndex:N,selectedOptions:C,toggleOption:I,selectAll:w,showSelectAll:_,selectAllLabel:y,allOptions:h,noOptionsText:d,size:A}=Mu(),[q,k]=t.useState(null),[O,H]=t.useState(!1),{refs:z,floatingStyles:W,placement:F}=Su({placement:"bottom-start",middleware:[Vu(4),vu({fallbackPlacements:["top-start"]}),Iu({limiter:wu(),padding:8})],whileElementsMounted:xu});bu(B,q,z,H);const g=t.useMemo(()=>document.getElementById(v),[v]);if(!c)return null;const U=()=>{c&&(m(!1),j(-1))},M=t.Children.map(n,(e,s)=>{if(t.isValidElement(e)&&typeof e.type!="string"){const S=e.props.label||(typeof e.props.children=="string"?e.props.children:""),D=C.includes(e.props.value);return t.cloneElement(e,{isFocused:s===N,isSelected:D,size:A,onSelect:()=>I(e.props.value,S)})}return e})||[],G=()=>{const e=Pu[A]||40;return{width:V?R||B.current?.offsetWidth:"100%",maxHeight:`${e*L+Ru}px`,...W,...p,visibility:O?"visible":"hidden"}},$=h.length>0&&C.length===h.length,r=a.jsx(Fu,{onClickAway:U,excludeRef:[B,P],children:a.jsxs(Cu,{ref:e=>{e&&(b&&typeof b=="object"&&(b.current=e),k(e))},style:G(),className:ou.options,"data-popper-placement":F,"data-ui-multi-select-options":!0,children:[_&&h.length>0&&a.jsx(gu,{value:"__select_all__",label:y,isSelected:$,size:A,onSelect:w,"data-ui-multi-select-select-all":!0,children:a.jsx(lu,{variant:"Caption-Medium",color:"var(--steel-70)",children:y})}),M.length>0?M:a.jsxs(hu,{className:ou["not-found-item"],alignItems:"center",gap:8,flexDirection:"row","data-ui-multi-select-no-options":!0,children:[a.jsx(Au,{name:"IconCancelOutlined16",containerSize:16,color:"error"}),a.jsx(lu,{variant:"Body1-Medium",color:"var(--steel-90)",children:d??"Ничего не найдено"})]})]})});return V?yu.createPortal(r,g):r};try{Y.displayName="Options",Y.__docgenInfo={description:"",displayName:"Options",props:{children:{defaultValue:null,description:"Дочерние элементы",name:"children",required:!0,type:{name:"ReactNode"}},menuStyle:{defaultValue:null,description:"Дополнительные стили для меню",name:"menuStyle",required:!1,type:{name:"CSSProperties"}}}}}catch{}const au=({value:n=[],onChange:p,id:c,name:B,portalContainerId:P="root",children:R,menuWidth:V,placeholder:b,label:v,withPortal:L=!1,disabled:m=!1,helperText:j,pseudo:N,onFocus:C,onBlur:I,color:w=Q.default,size:_=X.m,scrollingItems:y=Ou,noOptionsText:h="Ничего не найдено",searchable:d=!1,colored:A=!1,onEnterPress:q,reset:k,onReset:O,className:H,style:z,inputStyle:W,valueSeparator:F=", ",allSelectedText:g="Все",selectAllLabel:U="Выбрать все",showSelectAll:M=!1,clearSearchOnSelect:G=!1,...$})=>{const[r,e]=t.useState(!1),[s,S]=t.useState(""),[D,T]=t.useState(-1),f=t.useRef(null),su=t.useRef(null),Z=t.useRef(null);c=t.useMemo(()=>`MultiSelect-${c&&c.toString()||_u()}`,[c]),y<1&&(y=1,console.error("Scrolling items option should be at least 1, to show options dropdown correctly"));const x=t.Children.toArray(R).filter(u=>t.isValidElement(u)),i=t.useMemo(()=>x.map(u=>({label:u.props.label||(typeof u.props.children=="string"?u.props.children:""),value:u.props.value})),[x]),E=t.useMemo(()=>n.map(u=>i.find(o=>o.value===u)||{value:u,label:String(u)}),[n,i]),iu=()=>{e(!0),C?.()},pu=()=>{I?.()},cu=u=>{u.preventDefault(),u.stopPropagation(),r?(e(!1),I?.(),f.current?.blur()):(e(!0),C?.(),f.current?.focus())},uu=(u,l)=>{if(m)return;let o;n.includes(u)?o=n.filter(Eu=>Eu!==u):o=[...n,u],p?.(o),q&&r&&q(o),G&&S(""),f.current?.focus()},du=()=>{if(m)return;let u;i.length>0&&n.length===i.length?u=[]:u=i.map(l=>l.value),p?.(u),f.current?.focus()},eu=()=>{m||(p?.([]),e(!1),f.current?.blur())},K=t.useMemo(()=>!d||!s?x:x.filter(u=>(u.props.label||u.props.children||"").toString().toLowerCase().includes(s.toLowerCase())),[x,s,d]),J=K.length,mu=u=>{if(!r){(u.key==="ArrowDown"||u.key==="ArrowUp")&&(e(!0),u.preventDefault());return}switch(u.key){case"ArrowDown":T(l=>{const o=l+1;return o>=J?0:o}),u.preventDefault();break;case"ArrowUp":T(l=>{const o=l-1;return o<0?J-1:o}),u.preventDefault();break;case"Enter":if(D!==-1&&D<J){const l=K[D];l&&!l.props.disabled&&uu(l.props.value,l.props.label||(typeof l.props.children=="string"?l.props.children:""))}u.preventDefault();break;case"Escape":e(!1),T(-1),u.preventDefault();break}},fu=t.useMemo(()=>d&&r?s:E.length===0?"":i.length>0&&E.length===i.length&&g?g:E.map(u=>u.label).join(F),[E,d,r,s,i.length,g,F]);return a.jsx(ru.Provider,{value:{isOpen:r,setIsOpen:e,selectedOptions:n,toggleOption:uu,selectedOptionsWithLabels:E,setSelectedOptionsWithLabels:p,inputRef:f,menuRef:su,arrowButtonRef:Z,menuWidth:V,withPortal:L,portalContainerId:P,scrollingItems:y,searchTerm:s,setSearchTerm:S,focusedIndex:D,setFocusedIndex:T,onChange:p,valueSeparator:F,selectAll:du,clearAll:eu,showSelectAll:M,selectAllLabel:U,allOptions:i,noOptionsText:h,size:_},children:a.jsxs("div",{className:tu(nu.multiSelect,H),style:z,"data-ui-multi-select":!0,children:[a.jsx(Bu,{id:c,helperText:j,name:B,size:_,inputRef:f,value:fu,onChange:u=>d&&S(u.target.value),onKeyDown:mu,label:v,placeholder:b,disabled:m,readOnly:!d||!r,pseudo:N,color:w,onFocus:iu,onBlur:pu,colored:A,style:W,icon:a.jsx(Du,{isOpen:r,color:w,disabled:m,toggleDropdown:cu,buttonRef:Z}),className:tu(E.length>0&&nu.hasSelection),reset:k&&E.length>0,onReset:()=>{O?(O(),p?.([])):eu()},"data-ui-multi-select-input":!0,...$}),a.jsx(Y,{"data-ui-multi-select-options":!0,children:K})]})})};try{au.displayName="MultiSelect",au.__docgenInfo={description:"Компонент MultiSelect представляет собой кастомизируемый выпадающий список с возможностью выбора нескольких значений.",displayName:"MultiSelect",props:{label:{defaultValue:null,description:"Текст метки (label) инпута",name:"label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"sizesMappingInput.m"},description:"Размер инпута",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"s"'},{value:'"m"'}]}},disabled:{defaultValue:{value:"false"},description:"Флаг отключения инпута",name:"disabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"Имя инпута",name:"name",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"Уникальный идентификатор инпута",name:"id",required:!1,type:{name:"string"}},onReset:{defaultValue:null,description:"Обработчик сброса значения",name:"onReset",required:!1,type:{name:"((() => void) & FormEventHandler<HTMLInputElement> & FormEventHandler<HTMLTextAreaElement>)"}},reset:{defaultValue:null,description:"Флаг наличия кнопки сброса",name:"reset",required:!1,type:{name:"boolean"}},multiline:{defaultValue:null,description:"Флаг многострочного режима",name:"multiline",required:!1,type:{name:"boolean"}},pseudo:{defaultValue:null,description:"Флаг псевдо-инпута",name:"pseudo",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"Иконка инпута",name:"icon",required:!1,type:{name:"ReactNode"}},helperText:{defaultValue:null,description:"Вспомогательный текст",name:"helperText",required:!1,type:{name:"ReactNode"}},resize:{defaultValue:null,description:"Флаг возможности изменения размера (для textarea)",name:"resize",required:!1,type:{name:"boolean"}},colored:{defaultValue:{value:"false"},description:"Флаг цветного фона",name:"colored",required:!1,type:{name:"boolean"}},pseudoInputStyle:{defaultValue:null,description:"Инлайн стили для PseudoInput режима",name:"pseudoInputStyle",required:!1,type:{name:"CSSProperties"}},inputRef:{defaultValue:null,description:"Реф для доступа к DOM-элементу инпута",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement | HTMLTextAreaElement>"}},value:{defaultValue:{value:"[]"},description:"Массив выбранных значений",name:"value",required:!1,type:{name:"(string | number)[]"}},onChange:{defaultValue:null,description:"Функция обработчик, вызывается при выборе новых значений",name:"onChange",required:!1,type:{name:"((value: (string | number)[]) => void)"}},onBlur:{defaultValue:null,description:"Обработчик закрытия меню options",name:"onBlur",required:!1,type:{name:"(() => void)"}},onFocus:{defaultValue:null,description:"Обработчик открытия меню options",name:"onFocus",required:!1,type:{name:"(() => void)"}},portalContainerId:{defaultValue:{value:"root"},description:"id рутового контейнера для создания портала",name:"portalContainerId",required:!1,type:{name:"string"}},menuWidth:{defaultValue:null,description:"Ширина меню селекта",name:"menuWidth",required:!1,type:{name:"string"}},withPortal:{defaultValue:{value:"false"},description:"Флаг, указывающий, должно ли меню рендериться в портале",name:"withPortal",required:!1,type:{name:"boolean"}},onEnterPress:{defaultValue:null,description:"Обработчик нажатия клавиши Enter",name:"onEnterPress",required:!1,type:{name:"((items: (string | number)[]) => void)"}},scrollingItems:{defaultValue:{value:"5"},description:"Количество элементов после которого включается прокрутка",name:"scrollingItems",required:!1,type:{name:"number"}},noOptionsText:{defaultValue:{value:"Ничего не найдено"},description:"Текст, отображаемый когда нет доступных опций",name:"noOptionsText",required:!1,type:{name:"string"}},searchable:{defaultValue:{value:"false"},description:"Флаг, указывающий, доступен ли поиск",name:"searchable",required:!1,type:{name:"boolean"}},inputStyle:{defaultValue:null,description:"Кастомные стили для внутреннего Input компонента",name:"inputStyle",required:!1,type:{name:"CSSProperties"}},valueSeparator:{defaultValue:{value:","},description:"Разделитель для отображения выбранных значений",name:"valueSeparator",required:!1,type:{name:"string"}},maxVisibleTags:{defaultValue:null,description:'Максимальное количество отображаемых тегов (остальные будут под "+N")',name:"maxVisibleTags",required:!1,type:{name:"number"}},showCounter:{defaultValue:null,description:"Флаг для отображения счетчика выбранных элементов",name:"showCounter",required:!1,type:{name:"boolean"}},allSelectedText:{defaultValue:{value:"Все"},description:"Текст при выборе всех элементов",name:"allSelectedText",required:!1,type:{name:"string"}},selectAllLabel:{defaultValue:{value:"Выбрать все"},description:'Лейбл для кнопки "Выбрать все"',name:"selectAllLabel",required:!1,type:{name:"string"}},showSelectAll:{defaultValue:{value:"false"},description:'Флаг отображения кнопки "Выбрать все"',name:"showSelectAll",required:!1,type:{name:"boolean"}},clearSearchOnSelect:{defaultValue:{value:"false"},description:"Очищать поле поиска при выборе значения",name:"clearSearchOnSelect",required:!1,type:{name:"boolean"}},color:{defaultValue:{value:"customInputColors.default"},description:"Цвет компонента",name:"color",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"success"'},{value:'"warning"'}]}}}}}catch{}const Zu={value:{description:"Массив выбранных значений",control:{type:"array"}},onChange:{description:"Обработчик изменения выбранных значений",action:"onChange"},id:{description:"Идентификатор компонента",control:{type:"text"}},portalContainerId:{description:"id рутового контейнера для создания портала",control:{type:"text"}},children:{description:"Дочерние элементы селекта (опции меню)",control:{type:"text"}},menuWidth:{description:"Ширина меню селекта",control:{type:"text"}},placeholder:{description:"Плейсхолдер для инпута селекта",control:{type:"text"}},label:{description:"Лейбл инпута в селекте",control:{type:"text"}},withPortal:{description:"Флаг, указывающий, должно ли меню рендериться в портале",control:{type:"boolean"}},disabled:{description:"Флаг доступности селекта",control:{type:"boolean"}},onBlur:{description:"Обработчик закрытия меню options",action:"onBlur"},onFocus:{description:"Обработчик открытия меню options",action:"onFocus"},color:{description:"Цвет компонента",table:{defaultValue:{summary:Q.default}},options:Object.values(Q),control:{type:"select"}},size:{description:"Размер компонента",table:{defaultValue:{summary:X.m}},options:Object.values(X),control:{type:"select"}},scrollingItems:{description:"Количество элементов после которого включается прокрутка",control:{type:"number"}},noOptionsText:{description:"Текст, отображаемый когда нет доступных опций",control:{type:"text"}},searchable:{description:"Флаг, указывающий, доступен ли поиск",control:{type:"boolean"}},name:{description:"Name элемента, используется для ссылки на элемент",control:{type:"text"}},onEnterPress:{description:"Обработчик нажатия клавиши Enter",action:"onEnterPress"},style:{description:"Кастомные стили для самого селекта (контейнера)",control:{type:"object"}},inputStyle:{description:"Кастомные стили для внутреннего Input компонента",control:{type:"object"}},className:{description:"Добавление самостоятельного CSS класса",control:{type:"text"}},colored:{description:"Условие применения стилей подсветки",table:{defaultValue:{summary:"false"},type:{summary:"boolean"}},control:{type:"boolean"}},onReset:{description:"Callback, который будет вызван при клике по иконке сброса",action:"изменено value"},reset:{description:"Булевое значение для показа иконки сброса",control:{type:"boolean"},table:{defaultValue:{summary:!1}}},pseudo:{description:"Свойство, позволяющее отображать компонент как PseudoInput (не редактируемое поле)",table:{defaultValue:{summary:"false"},type:{summary:"boolean"}},control:{type:"boolean"}},helperText:{description:"Строка для вспомогательного текста под инпутом. Может быть как текстом, так и элементом ReactNode",control:{type:"text"}},valueSeparator:{description:"Разделитель для отображения выбранных значений",control:{type:"text"},table:{defaultValue:{summary:", "}}},maxVisibleTags:{description:'Максимальное количество отображаемых тегов (остальные будут под "+N")',control:{type:"number"},table:{defaultValue:{summary:3}}},showCounter:{description:"Флаг для отображения счетчика выбранных элементов",control:{type:"boolean"},table:{defaultValue:{summary:!0}}},allSelectedText:{description:"Текст при выборе всех элементов",control:{type:"text"},table:{defaultValue:{summary:"Все"}}},selectAllLabel:{description:'Лейбл для кнопки "Выбрать все"',control:{type:"text"},table:{defaultValue:{summary:"Выбрать все"}}},showSelectAll:{description:'Флаг отображения кнопки "Выбрать все"',control:{type:"boolean"},table:{defaultValue:{summary:!1}}},clearSearchOnSelect:{description:"Очищать поле поиска при выборе значения",control:{type:"boolean"},table:{defaultValue:{summary:!1}}}};export{au as M,Zu as a};
