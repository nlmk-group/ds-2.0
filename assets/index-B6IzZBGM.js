import{j as A,r as n,R as s4}from"./iframe-zk5xXBtA.js";import{f as Q,u as a4,i as Ru,p as Ku,a as zu,s as Du,I as Ou,b as Gu,d as Ju}from"./hook-DdzhRkzq.js";import{u as l4}from"./useFloatingReferenceSync-C6rFkWeV.js";import{P as r4}from"./index-DlGInOJ7.js";import{C as Xu}from"./index-CsA5WfEK.js";import{u as o4,a as i4,o as d4,f as c4,s as f4}from"./floating-ui.react-0uHpbrLG.js";import{c as _u}from"./clsx-B-dksMZM.js";import{I as m4}from"./index-BbV7Z3ze.js";import{l as Yu}from"./lodash-CJNAKYux.js";import{J as _4}from"./index-1zUxKm4P.js";import{T as Vu}from"./index-9BCGLlQQ.js";import{g as p4}from"./generateUUID-M57HTP56.js";var R=(g=>(g.HOURS="hours",g.MINUTES="minutes",g.SECONDS="seconds",g))(R||{});const gu="2-digit";var du=(g=>(g.time="time",g.timeWithSeconds="timeWithSeconds",g.period="period",g.periodWithSeconds="periodWithSeconds",g))(du||{});const E4="TimePicker-module__root___yeJOh",D4="TimePicker-module__disabled___fM12n",C4="TimePicker-module__opened___Y6Rpn",ku={root:E4,disabled:D4,opened:C4},F4="MeasureUnit-module__root___i0BMN",B4="MeasureUnit-module__wrapper___CIeYN",g4="MeasureUnit-module__selected___IOire",h4="MeasureUnit-module__disabled___2WKTw",Su={root:F4,wrapper:B4,selected:g4,disabled:h4},Tu=({onHover:g,onClick:q,selected:v,disabled:x,children:N})=>{const O=M=>{!x&&g&&g(M)},j=M=>{!x&&q&&q(M)},G=_u(Su.root,{[Su.selected]:v,[Su.disabled]:x});return A.jsx("div",{onClick:j,className:G,onMouseOver:O,"data-testid":v?"selected":void 0,children:A.jsx("div",{className:Su.wrapper,children:A.jsx(Vu,{variant:"Body1-Medium",children:N})})})};try{Tu.displayName="MeasureUnit",Tu.__docgenInfo={description:"",displayName:"MeasureUnit",props:{selected:{defaultValue:null,description:"Флаг выбранного состояния",name:"selected",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Флаг блокировки компонента",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"Обработчик клика",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onHover:{defaultValue:null,description:"Обработчик наведения мыши",name:"onHover",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},children:{defaultValue:null,description:"Дочерние элементы",name:"children",required:!1,type:{name:"ReactNode"}},disableTimeChange:{defaultValue:null,description:"Флаг блокировки изменения времени",name:"disableTimeChange",required:!1,type:{name:"boolean"}}}}}catch{}const fu="HH:mm",mu="HH:mm:ss",Qu="HH:MM",Zu="HH:MM:SS",Wu="00:00",u4="00:00:00",Eu={hh:"чч",mm:"мм",ss:"сс"},b4="TimePickerInput-module__clock___IGCpL",y4="TimePickerInput-module__cursor___TXj-W",A4="TimePickerInput-module__input___i1i5K",Pu={clock:b4,cursor:y4,input:A4},Hu=n.forwardRef(({className:g,disabled:q,onFocus:v,onBlur:x,onChangeFirst:N,onChangeSecond:O,onEnterKeyDown:j,onTabKeyDown:G,value:M,enabledHourFrom:T,enabledHourTo:k,enabledMinuteFrom:S,enabledMinuteTo:L,onChange:pu,isTimeType:lu,isTimeWithSecondsType:V,isTimePeriodType:P,isTimePeriodWithSecondsType:_,colored:tu,isOpenOnFocus:nu,withIcon:ru,withPicker:J,valueFrom:y,valueTo:h,label:cu="",reset:Cu,onReset:U,onToggle:I,iconRef:H,...Z},X)=>{const[c,D]=n.useState(""),[Y,ou]=n.useState(!1),uu=n.useRef(null),w=n.useRef(null),$=n.useRef(!1),l=n.useRef(!1),e=n.useMemo(()=>_||P,[P,_]),m=()=>{ou(!0),v&&nu&&v()},b=()=>{if(ou(!1),!e){K();return}Fu()},K=()=>{if((!c||c==="__:__"||c==="__:__:__")&&M&&U){$.current=!0,U();return}if(M&&c.includes("_")){const s=Q(M,V?mu:fu);c!==s&&D(s)}else!M&&c.includes("_")&&D(V?"__:__:__":"__:__");if(!x)return;const i=z();x(i),i&&pu?.(i)},Fu=()=>{const u=c.split(" — "),i=_?"__:__:__":"__:__",s=u.some(E=>E&&E.includes("_")&&E!==i),t=z(),a=Array.isArray(t)&&(t[0]===null&&u[0]&&u[0]!==i&&!u[0].includes("_")||t[1]===null&&u[1]&&u[1]!==i&&!u[1].includes("_"));if(s||a){W(i),x&&x(y||null,h||null);return}if(!x||!Array.isArray(t))return;x(t[0],t[1]);const o=hu(t[0],y),p=hu(t[1],h);(o||p)&&(l.current=!0,N?.(t[0]||void 0),O?.(t[1]||void 0))},W=u=>{const i=_?mu:fu,s=y?Q(y,i):"",t=h?Q(h,i):"";if(s||t){const a=`${s||u} — ${t||u}`;D(a)}else D("")},hu=(u,i)=>u===null&&i!==null&&i!==void 0||u!==null&&!i||u!==null&&i!==null&&i!==void 0&&u.getTime()!==i.getTime(),Bu=u=>{if(u.key==="Backspace"||u.key==="Delete"){const i=u.target,s=i.selectionStart||0,t=i.selectionEnd||0;if(s===0&&t===c.length){if(u.preventDefault(),e)D(_?"__:__:__ — __:__:__":"__:__ — __:__"),setTimeout(()=>{i.setSelectionRange(0,0)},0);else{const a=V?"__:__:__":"__:__";D(a),C.current&&(C.current.value=a),setTimeout(()=>{i.setSelectionRange(0,0)},0)}return}if(e&&s<t){u.preventDefault();const a=c.substring(s,t);if(/\d/.test(a)){let p=c;for(let E=s;E<t;E++)/\d/.test(p[E])&&(p=p.substring(0,E)+"_"+p.substring(E+1));D(p),w.current=s}return}}if(/^[0-9]$/.test(u.key)&&e){u.preventDefault();const s=u.target.selectionStart||0,t=_?"__:__:__ — __:__:__":"__:__ — __:__";let a=-1;if(s<t.length&&t[s]==="_")a=s;else{for(let o=s;o<t.length;o++)if(t[o]==="_"&&c[o]==="_"){a=o;break}if(a===-1){for(let o=0;o<s;o++)if(t[o]==="_"&&c[o]==="_"){a=o;break}}}if(a!==-1){let o;_?o=a>=11?a-11:a:o=a>=8?a-8:a;let p=c;if(p.length<t.length&&(p=p+t.substring(p.length),D(p)),o===1&&p[a-1]==="2"&&parseInt(u.key)>3)return;if(o===0&&parseInt(u.key)>2){const f=a+1;if(p[f]==="_"){const F=p.substring(0,a)+"0"+u.key+p.substring(a+2);let r=a+2;for(;r<t.length&&t[r]!=="_";)r++;w.current=r,D(F);return}}if(o===3&&parseInt(u.key)>=6){const f=a+1;if(p[f]!=="_")return;{const F=p.substring(0,a)+"0"+u.key+p.substring(a+2);let r=a+2;for(;r<t.length&&t[r]!=="_";)r++;w.current=r,D(F);return}}if(o===6&&_&&parseInt(u.key)>=6){const f=a+1;if(p[f]!=="_")return;{const F=p.substring(0,a)+"0"+u.key+p.substring(a+2);let r=a+2;for(;r<t.length&&t[r]!=="_";)r++;w.current=r,D(F);return}}const E=p.substring(0,a)+u.key+p.substring(a+1);let d=a+1;for(;d<t.length&&t[d]!=="_";)d++;w.current=d,D(E)}return}if(e&&u.key.length===1&&!/[0-9]/.test(u.key)&&!u.ctrlKey&&!u.metaKey){u.preventDefault();return}if(e&&(u.key==="Backspace"||u.key==="Delete")){const i=u.target,s=i.selectionStart||0,t=i.selectionEnd||0,a=_?"__:__:__ — __:__:__":"__:__ — __:__";let o;if(u.key==="Backspace"?o=s===t?s-1:s:o=s,o>=0&&o<a.length){const p=a[o],E=c[o];if(p!=="_"){u.preventDefault(),u.key==="Backspace"&&o>0&&setTimeout(()=>{i.setSelectionRange(o,o)},0);return}if(E==="_"){if(u.preventDefault(),u.key==="Backspace"&&o>0){let d=o-1;for(;d>=0&&(a[d]!=="_"||c[d]==="_");)d--;const f=d>=0?d+1:0;setTimeout(()=>{i.setSelectionRange(f,f)},0)}return}}}if(u.key==="Tab"&&G){const i=z();Array.isArray(i)?G(i[0],i[1]):G(i)}if(u.key==="Enter"){if(!e&&(!c||c==="__:__"||c==="__:__:__")&&M&&U){$.current=!0,U();return}else if(e){const s=c.split(" — "),t=_?"__:__:__":"__:__",a=s.some(E=>E&&E.includes("_")&&E!==t),o=z(),p=Array.isArray(o)&&(o[0]===null&&s[0]&&s[0]!==t&&!s[0].includes("_")||o[1]===null&&s[1]&&s[1]!==t&&!s[1].includes("_"));if(a||p){const E=_?mu:fu,d=y?Q(y,E):"",f=h?Q(h,E):"";if(d||f){const F=`${d||t} — ${f||t}`;D(F)}else D("");return}if(Array.isArray(o)){const E=o[0]===null&&y!==null&&y!==void 0||o[0]!==null&&!y,d=o[1]===null&&h!==null&&h!==void 0||o[1]!==null&&!h;(E||d)&&(N?.(o[0]||void 0),O?.(o[1]||void 0)),j&&j(o[0],o[1])}}else if(j){const s=z();Array.isArray(s)?j(s[0],s[1]):j(s)}}};n.useEffect(()=>{if(!e){let t;if(M?t=Q(M,V?mu:fu):t=V?"__:__:__":"__:__",$.current){M||($.current=!1,D(t),C.current&&(C.current.value=t));return}if(c===t)return;D(t),C.current&&C.current.value!==t&&(C.current.value=t);return}if(Y)return;const u=_?mu:fu,i=_?"__:__:__":"__:__";let s="";if(!y&&!h)s=_?"__:__:__ — __:__:__":"__:__ — __:__";else if(y&&h)if(Ru(y,h)){N?.(h),O?.(y);const t=Q(h,u),a=Q(y,u);s=`${t} — ${a}`}else{const t=Q(y,u),a=Q(h,u);s=`${t} — ${a}`}else if(y&&!h)s=`${Q(y,u)} — ${i}`;else if(!y&&h){const t=Q(h,u);s=`${i} — ${t}`}if(c===s){l.current&&(l.current=!1);return}l.current||D(s)},[lu,M,V,y,h,P,_,e,N,O,Y]);const bu=n.useMemo(()=>e?_?`${u4} — ${u4}`:`${Wu} — ${Wu}`:V?Zu:Qu,[Y,lu,V,e,_]),{ref:C,value:yu,setValue:iu}=a4(e?{mask:!1,lazy:!1}:{mask:bu,blocks:{HH:{mask:Ou.MaskedRange,from:0,to:23,maxLength:2,autofix:"pad",placeholderChar:"_"},MM:{mask:Ou.MaskedRange,from:0,to:59,maxLength:2,autofix:"pad",placeholderChar:"_"},SS:{mask:Ou.MaskedRange,from:0,to:59,maxLength:2,autofix:"pad",placeholderChar:"_"}},lazy:!1},{onAccept:(u,i)=>{if(!e){const s=i.value;s!==c&&D(s)}}});n.useLayoutEffect(()=>{if(w.current!==null){const u=e?uu.current:C.current?.input;if(u){const i=w.current;u.setSelectionRange(i,i),w.current=null}}},[c,e]),n.useEffect(()=>{if(!X)return;const u=e?uu.current:C.current;if(typeof X=="function"){X(u);return}X.current=u},[X,C,e]),n.useEffect(()=>{e||yu!==c&&iu(c)},[c,e]);const Au=n.useMemo(()=>ru&&J?A.jsx("div",{ref:H,onClick:u=>{u.preventDefault(),u.stopPropagation(),J&&I?I():J&&v?.()},className:_u(Pu.clock,!J&&Pu.cursor),children:A.jsx(_4,{})}):null,[v,I,ru,J,H]),Mu=(u,i)=>u.replace(/[HMS]/gi,"_")===i,vu=n.useCallback(()=>{D(e?"":V?"__:__:__":"__:__"),U?.()},[U,e,V]),su=n.useCallback(u=>{const s=u.target.value,t=(e&&uu.current,c);if(e){const a=_?"__:__:__ — __:__:__":"__:__ — __:__";if(t&&s.length<t.length){let d=-1;for(let f=0;f<t.length;f++)if(f>=s.length||s[f]!==t[f]){d=f;break}if(d>=0){const f=t[d];if(a[d]!=="_")return;if(/[0-9]/.test(f)){const r=t.substring(0,d)+"_"+t.substring(d+1);w.current=d,D(r);return}w.current=d,D(t);return}}const o=u.target.selectionStart||0,p=s.slice(0,a.length);let E="";for(let d=0;d<a.length;d++){const f=p[d],F=a[d];if(F==="_")if(f&&/[0-9_]/.test(f)){let r;_?d>=12?r=d-12:r=d:d>=9?r=d-9:r=d;let B=!0;r===0&&f!=="_"&&parseInt(f)>2?B=!1:r===1&&f!=="_"?E[d-1]==="2"&&parseInt(f)>3&&(B=!1):(r===3&&f!=="_"&&parseInt(f)>5||r===6&&_&&f!=="_"&&parseInt(f)>5)&&(B=!1),E+=B?f:"_"}else E+="_";else E+=F}w.current=o,D(E);return}D(s)},[e,_,c]),z=n.useCallback(()=>{const u=new Date,i=T?Number(T(u)):0,s=k?Number(k(u)):23,t=S?Number(S(u)):0,a=L?Number(L(u)):59,o=Yu.range(i,s+1),p=Yu.range(t,a+1),E=d=>{const f=o.includes(d.getHours()),F=p.includes(d.getMinutes());return Du(d,{hours:f?d.getHours():o[0],minutes:F?d.getMinutes():p[0]})};try{if(e){const d=c.split(" — "),F=d.map(r=>r?Ku(r,_?mu:fu,u):null).map((r,B)=>{const au=d[B];return!r||!zu(r)?(au&&au.includes("_"),null):E(r)});return F[0]===null&&F[1]===null?[null,null]:F[0]&&F[1]&&Ru(F[0],F[1])?(N&&O&&(N(F[1]),O(F[0])),[F[1],F[0]]):[F[0]||null,F[1]||null]}else if(c.includes("_")){if(lu&&Mu(Qu,c)||V&&Mu(Zu,c))return M||null}else{const d=Ku(c,V?mu:fu,u),f=E(d);if(zu(f))return f}}catch{return null}return null},[T,k,S,L,c,M,V,lu,_,P,h,y,N,O,e]),Nu=Cu&&(e?!!(y||h):!!M);return A.jsx(m4,{inputRef:e?uu:C,value:c,onChange:su,onFocus:m,onBlur:b,onKeyDown:Bu,className:_u(g,Pu.input),disabled:q,label:cu,icon:Au,colored:tu,reset:Nu,onReset:vu,...Z})});Hu.displayName="TimePickerInput";try{Hu.displayName="TimePickerInput",Hu.__docgenInfo={description:"",displayName:"TimePickerInput",props:{className:{defaultValue:null,description:"Дополнительный CSS класс",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Выбранное значение времени",name:"value",required:!1,type:{name:"Date"}},valueFrom:{defaultValue:null,description:"Начальное значение времени для периода",name:"valueFrom",required:!1,type:{name:"Date"}},valueTo:{defaultValue:null,description:"Конечное значение времени для периода",name:"valueTo",required:!1,type:{name:"Date"}},selectedTimeFirst:{defaultValue:null,description:"Выбранное время для первого пикера (для периода)",name:"selectedTimeFirst",required:!1,type:{name:"Date"}},selectedTimeSecond:{defaultValue:null,description:"Выбранное время для второго пикера (для периода)",name:"selectedTimeSecond",required:!1,type:{name:"Date"}},onChangeFirst:{defaultValue:null,description:"Обработчик изменения первого времени (может быть undefined при частичном сбросе)",name:"onChangeFirst",required:!1,type:{name:"((date: Date) => void)"}},onChangeSecond:{defaultValue:null,description:"Обработчик изменения второго времени (может быть undefined при частичном сбросе)",name:"onChangeSecond",required:!1,type:{name:"((date: Date) => void)"}},onChange:{defaultValue:null,description:"Обработчик изменения времени",name:"onChange",required:!1,type:{name:"((date: Date) => void)"}},onFocus:{defaultValue:null,description:"Обработчик фокуса на поле ввода",name:"onFocus",required:!1,type:{name:"(() => void)"}},onBlur:{defaultValue:null,description:"Обработчик потери фокуса",name:"onBlur",required:!1,type:{name:"((date: Date | null, date2?: Date | null) => void)"}},onEnterKeyDown:{defaultValue:null,description:"Обработчик нажатия Enter",name:"onEnterKeyDown",required:!1,type:{name:"((date: Date | null, date2?: Date | null) => void)"}},onTabKeyDown:{defaultValue:null,description:"Обработчик нажатия Tab",name:"onTabKeyDown",required:!1,type:{name:"((date: Date | null, date2?: Date | null) => void)"}},isTimeType:{defaultValue:null,description:"Флаг режима одиночного времени",name:"isTimeType",required:!1,type:{name:"boolean"}},isTimeWithSecondsType:{defaultValue:null,description:"Флаг режима времени с секундами",name:"isTimeWithSecondsType",required:!1,type:{name:"boolean"}},isTimePeriodType:{defaultValue:null,description:"Флаг режима периода времени",name:"isTimePeriodType",required:!1,type:{name:"boolean"}},isTimePeriodWithSecondsType:{defaultValue:null,description:"Флаг режима периода времени с секундами",name:"isTimePeriodWithSecondsType",required:!1,type:{name:"boolean"}},enabledHourFrom:{defaultValue:null,description:"Функция для определения начального доступного часа",name:"enabledHourFrom",required:!1,type:{name:"((date: Date) => TEnabledHour)"}},enabledHourTo:{defaultValue:null,description:"Функция для определения конечного доступного часа",name:"enabledHourTo",required:!1,type:{name:"((date: Date) => TEnabledHour)"}},enabledMinuteFrom:{defaultValue:null,description:"Функция для определения начальной доступной минуты",name:"enabledMinuteFrom",required:!1,type:{name:"((date: Date) => number) | undefined"}},enabledMinuteTo:{defaultValue:null,description:"Функция для определения конечной доступной минуты",name:"enabledMinuteTo",required:!1,type:{name:"((date: Date) => number) | undefined"}},isOpenOnFocus:{defaultValue:null,description:"Флаг открытия пикера при фокусе",name:"isOpenOnFocus",required:!1,type:{name:"boolean"}},withIcon:{defaultValue:null,description:"Флаг отображения иконки",name:"withIcon",required:!1,type:{name:"boolean"}},withPicker:{defaultValue:null,description:"Флаг использования всплывающего пикера",name:"withPicker",required:!1,type:{name:"boolean"}},onToggle:{defaultValue:null,description:"Обработчик toggle панели",name:"onToggle",required:!1,type:{name:"(() => void)"}},iconRef:{defaultValue:null,description:"Ref для иконки часов",name:"iconRef",required:!1,type:{name:"RefObject<HTMLDivElement | null>"}},disabled:{defaultValue:null,description:"Флаг отключения инпута",name:"disabled",required:!1,type:{name:"boolean"}},onReset:{defaultValue:null,description:"Обработчик сброса значения",name:"onReset",required:!1,type:{name:"(() => void)"}},reset:{defaultValue:null,description:"Флаг наличия кнопки сброса",name:"reset",required:!1,type:{name:"boolean"}},label:{defaultValue:{value:""},description:"Текст метки (label) инпута",name:"label",required:!1,type:{name:"string"}},colored:{defaultValue:null,description:"Флаг цветного фона",name:"colored",required:!1,type:{name:"boolean"}}}}}catch{}const M4="TimeSelector-module__selector___Jvz3e",eu={selector:M4,"selector-single":"TimeSelector-module__selector-single___Cnh46","selector-with-seconds":"TimeSelector-module__selector-with-seconds___Rg2Sx","selector-column":"TimeSelector-module__selector-column___8axyK","selector-column-title":"TimeSelector-module__selector-column-title___RW--s","title-start-period":"TimeSelector-module__title-start-period___4rGbH","title-start-period-with-seconds":"TimeSelector-module__title-start-period-with-seconds___xjvww","title-end-period":"TimeSelector-module__title-end-period___ElHCJ"},Iu=40,Uu=3*Iu,ju=0,e4=23,$u=0,qu=59,wu=n.forwardRef(({selectedTime:g,selectedParts:q,initialSelectedTimeFirst:v,initialSelectedTimeSecond:x,onChangeFirst:N,onChange:O,onPartsChange:j,onChangeSecond:G,selectedPartsFirst:M,selectedPartsSecond:T,onPartsChangeFirst:k,onPartsChangeSecond:S,innerValue:L,value:pu,disabled:lu,isTimeWithSecondsType:V,isTimePeriodType:P,isTimePeriodWithSecondsType:_,enabledHourFrom:tu,enabledHourTo:nu,enabledMinuteFrom:ru,enabledMinuteTo:J},y)=>{const h=n.useMemo(()=>{const l=tu?tu(L):ju,e=nu?nu(L):e4;return Array.from({length:(e||e4)-(l||ju)+1},(m,b)=>b+(l||ju))},[tu,nu,L]),cu=n.useMemo(()=>{const l=ru?ru(L):$u,e=J?J(L):qu;return Array.from({length:(e||qu)-(l||$u)+1},(m,b)=>b+(l||$u))},[ru,J,L]),Cu=n.useCallback(l=>{if(!v)return!1;const e=v.getHours();return l<e},[v]),U=n.useCallback((l,e)=>{if(!v)return!1;const m=v.getHours(),b=v.getMinutes();return l===m&&e<b},[v]),I=n.useCallback((l,e)=>{const m={...q};if(l===R.HOURS&&(m.hours=e),l===R.MINUTES&&(m.minutes=e),l===R.SECONDS&&(m.seconds=e),j&&j(m),O&&m.hours!==void 0&&m.minutes!==void 0){const K=Du(g||new Date,{hours:m.hours,minutes:m.minutes,seconds:m.seconds??0});O(K)}},[O,j,g,q]),H=n.useCallback((l,e)=>{const m={...M};if(l===R.HOURS&&(m.hours=e),l===R.MINUTES&&(m.minutes=e),l===R.SECONDS&&(m.seconds=e),k&&k(m),N&&m.hours!==void 0&&m.minutes!==void 0){const K=Du(v||new Date,{hours:m.hours,minutes:m.minutes,seconds:m.seconds??0});N(K)}},[N,k,v,M]),Z=n.useCallback((l,e)=>{const m={...T};if(l===R.HOURS&&(m.hours=e),l===R.MINUTES&&(m.minutes=e),l===R.SECONDS&&(m.seconds=e),S&&S(m),G&&m.hours!==void 0&&m.minutes!==void 0){const K=Du(x||new Date,{hours:m.hours,minutes:m.minutes,seconds:m.seconds??0});G(K)}},[G,S,x,T]),X=n.useRef(null),c=n.useRef(null),D=n.useRef(null),Y=n.useRef(null),ou=n.useRef(null),uu=n.useRef(null),w=n.useCallback((l,e)=>{l&&(e[0]?.scrollTo(0,Math.max(0,l.getHours()*Iu-Uu)),e[1]?.scrollTo(0,Math.max(0,l.getMinutes()*Iu-Uu)),e[2]?.scrollTo(0,Math.max(0,l.getSeconds()*Iu-Uu)))},[]);n.useEffect(()=>{w(pu||new Date,[X.current,c.current,D.current])},[pu,w]),n.useEffect(()=>{w(v,[X.current,c.current,D.current])},[v,X,c,D]),n.useEffect(()=>{w(x,[Y.current,ou.current,uu.current])},[x,Y,ou,uu]);const $=(l,e,m,b,K,Fu)=>A.jsxs("div",{className:eu["selector-column"],ref:b,children:[A.jsx("div",{className:eu["selector-column-title"],children:A.jsx(Vu,{variant:"Body1-Medium",color:"var(--steel-70)",children:l})}),e.map(W=>A.jsx(Tu,{disabled:Fu?.(W)||lu,selected:m===W,onClick:()=>K(W),children:W.toString().padStart(2,"0")},W))]});return A.jsxs("div",{style:{display:"flex",gap:"12px"},children:[A.jsxs("div",{ref:y,className:_u(eu.selector,{[eu["selector-single"]]:!P&&!_,[eu["selector-with-seconds"]]:V||_}),"data-ui-time-selector":!0,children:[(P||_)&&A.jsx("div",{className:_u(_?eu["title-start-period-with-seconds"]:eu["title-start-period"]),children:A.jsx(Vu,{variant:"Body1-Medium",children:"Начало"})}),$(Eu.hh,h,P||_?M?.hours:q?.hours,X,l=>{P||_?H(R.HOURS,l):I(R.HOURS,l)}),$(Eu.mm,cu,P||_?M?.minutes:q?.minutes,c,l=>{P||_?H(R.MINUTES,l):I(R.MINUTES,l)}),(V||_)&&$(Eu.ss,Array.from({length:qu+1},(l,e)=>e),P||_?M?.seconds:q?.seconds,D,l=>{P||_?H(R.SECONDS,l):I(R.SECONDS,l)})]}),(P||_)&&A.jsxs("div",{className:_u(eu.selector,{[eu["selector-with-seconds"]]:V||_}),"data-ui-time-selector":!0,children:[A.jsx("div",{className:eu["title-end-period"],children:A.jsx(Vu,{variant:"Body1-Medium",children:"Окончание"})}),$(Eu.hh,h,T?.hours,Y,l=>Z(R.HOURS,l),Cu),$(Eu.mm,cu,T?.minutes,ou,l=>Z(R.MINUTES,l),l=>U(T?.hours||0,l)),_&&$(Eu.ss,Array.from({length:qu+1},(l,e)=>e),T?.seconds,uu,l=>Z(R.SECONDS,l))]})]})});wu.displayName="TimeSelector";try{wu.displayName="TimeSelector",wu.__docgenInfo={description:"",displayName:"TimeSelector",props:{selectedTime:{defaultValue:null,description:"Выбранное время",name:"selectedTime",required:!1,type:{name:"Date"}},selectedParts:{defaultValue:null,description:"Выбранные части времени (для подсветки)",name:"selectedParts",required:!1,type:{name:"{ hours?: number; minutes?: number; seconds?: number | undefined; } | undefined"}},initialSelectedTimeFirst:{defaultValue:null,description:"Начальное время для первого селектора",name:"initialSelectedTimeFirst",required:!1,type:{name:"Date"}},initialSelectedTimeSecond:{defaultValue:null,description:"Начальное время для второго селектора",name:"initialSelectedTimeSecond",required:!1,type:{name:"Date"}},onChangeFirst:{defaultValue:null,description:"Обработчик изменения первого времени",name:"onChangeFirst",required:!1,type:{name:"((date: Date) => void)"}},onChangeSecond:{defaultValue:null,description:"Обработчик изменения второго времени",name:"onChangeSecond",required:!1,type:{name:"((date: Date) => void)"}},onChange:{defaultValue:null,description:"Общий обработчик изменения времени",name:"onChange",required:!1,type:{name:"((date: Date) => void)"}},onPartsChange:{defaultValue:null,description:"Обработчик изменения выбранных частей",name:"onPartsChange",required:!1,type:{name:"((parts: { hours?: number; minutes?: number; seconds?: number | undefined; }) => void) | undefined"}},selectedPartsFirst:{defaultValue:null,description:"Выбранные части времени для первого селектора периода",name:"selectedPartsFirst",required:!1,type:{name:"{ hours?: number; minutes?: number; seconds?: number | undefined; } | undefined"}},selectedPartsSecond:{defaultValue:null,description:"Выбранные части времени для второго селектора периода",name:"selectedPartsSecond",required:!1,type:{name:"{ hours?: number; minutes?: number; seconds?: number | undefined; } | undefined"}},onPartsChangeFirst:{defaultValue:null,description:"Обработчик изменения выбранных частей первого селектора",name:"onPartsChangeFirst",required:!1,type:{name:"((parts: { hours?: number; minutes?: number; seconds?: number | undefined; }) => void) | undefined"}},onPartsChangeSecond:{defaultValue:null,description:"Обработчик изменения выбранных частей второго селектора",name:"onPartsChangeSecond",required:!1,type:{name:"((parts: { hours?: number; minutes?: number; seconds?: number | undefined; }) => void) | undefined"}},value:{defaultValue:null,description:"Значение времени",name:"value",required:!1,type:{name:"Date"}},innerValue:{defaultValue:null,description:"Внутреннее значение времени",name:"innerValue",required:!1,type:{name:"Date"}},disabled:{defaultValue:null,description:"Флаг блокировки компонента",name:"disabled",required:!1,type:{name:"boolean"}},isTimeWithSecondsType:{defaultValue:null,description:"Флаг типа с секундами",name:"isTimeWithSecondsType",required:!1,type:{name:"boolean"}},isTimePeriodType:{defaultValue:null,description:"Флаг типа периода",name:"isTimePeriodType",required:!1,type:{name:"boolean"}},isTimePeriodWithSecondsType:{defaultValue:null,description:"Флаг типа периода с секундами",name:"isTimePeriodWithSecondsType",required:!1,type:{name:"boolean"}},enabledHourFrom:{defaultValue:null,description:"Функция для определения начального доступного часа",name:"enabledHourFrom",required:!1,type:{name:"((date: Date) => TEnabledHour)"}},enabledHourTo:{defaultValue:null,description:"Функция для определения конечного доступного часа",name:"enabledHourTo",required:!1,type:{name:"((date: Date) => TEnabledHour)"}},enabledMinuteFrom:{defaultValue:null,description:"Функция для определения начальной доступной минуты",name:"enabledMinuteFrom",required:!1,type:{name:"((date: Date) => number) | undefined"}},enabledMinuteTo:{defaultValue:null,description:"Функция для определения конечной доступной минуты",name:"enabledMinuteTo",required:!1,type:{name:"((date: Date) => number) | undefined"}}}}}catch{}const t4=({id:g,type:q=du.time,name:v,portalContainerId:x="root",enabledHourFrom:N,enabledHourTo:O,enabledMinuteFrom:j,enabledMinuteTo:G,value:M,onChange:T,valueFrom:k,valueTo:S,onPeriodChange:L,className:pu,disabledPanel:lu=!1,withPortal:V=!1,colored:P=!1,pseudo:_=!1,isOpenOnFocus:tu=!1,withIcon:nu=!0,withPicker:ru=!0,label:J="",reset:y,onReset:h,...cu})=>{const Cu=n.useMemo(()=>q===du.time,[q]),U=n.useMemo(()=>q===du.timeWithSeconds,[q]),I=n.useMemo(()=>q===du.period,[q]),H=n.useMemo(()=>q===du.periodWithSeconds,[q]),[Z,X]=n.useState(tu),[c,D]=n.useState(!1),[Y,ou]=n.useState(null),[uu,w]=n.useState(null),$=n.useRef(null),l=n.useMemo(()=>`TimePicker-${g&&g.toString()||p4()}`,[g]),[e,m]=n.useState(k),[b,K]=n.useState(S),[Fu,W]=n.useState(k?{hours:k.getHours(),minutes:k.getMinutes(),seconds:k.getSeconds()}:{hours:void 0,minutes:void 0,seconds:void 0}),[hu,Bu]=n.useState(S?{hours:S.getHours(),minutes:S.getMinutes(),seconds:S.getSeconds()}:{hours:void 0,minutes:void 0,seconds:void 0}),{onChange:bu}=Gu(n.useMemo(()=>({valueFrom:k,valueTo:S}),[k,S]),n.useCallback((r,B)=>!r.valueFrom||!B.valueFrom?r.valueFrom===B.valueFrom:!r.valueTo||!B.valueTo?r.valueTo===B.valueTo:Ju(r.valueFrom,B.valueFrom)&&Ju(r.valueTo,B.valueTo),[])),{value:C,onChange:yu}=Gu(M),[iu,Au]=n.useState(C),[Mu,vu]=n.useState({hours:C?.getHours(),minutes:C?.getMinutes(),seconds:C?.getSeconds()});n.useEffect(()=>{if(Au(C),vu({hours:C?.getHours(),minutes:C?.getMinutes(),seconds:C?.getSeconds()}),I||H){m(k),K(S);const r=k?{hours:k.getHours(),minutes:k.getMinutes(),seconds:k.getSeconds()}:{hours:void 0,minutes:void 0,seconds:void 0},B=S?{hours:S.getHours(),minutes:S.getMinutes(),seconds:S.getSeconds()}:{hours:void 0,minutes:void 0,seconds:void 0};W(r),Bu(B)}},[C,I,H,k,S]),n.useEffect(()=>{if(I||H){const r=e?{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}:{hours:void 0,minutes:void 0,seconds:void 0},B=b?{hours:b.getHours(),minutes:b.getMinutes(),seconds:b.getSeconds()}:{hours:void 0,minutes:void 0,seconds:void 0};W(r),Bu(B)}},[e,b,I,H]),n.useEffect(()=>{(tu||!nu)&&X(!0)},[tu,nu]);const su=n.useCallback(r=>{yu(r),T?.(r)},[yu,T]),z=n.useCallback((r,B)=>{L?.(r,B),bu({valueFrom:r,valueTo:B})},[bu,L]),xu=n.useCallback(()=>{D(!1)},[]),Nu=n.useCallback(()=>{D(!0)},[]),u=n.useMemo(()=>{if(!C)return"";const r=U?{hour:gu,minute:gu,second:gu}:{hour:gu,minute:gu};return C.toLocaleTimeString([],r)},[C,U]),[i,s]=n.useState(!1),{refs:t,floatingStyles:a,placement:o}=o4({placement:"bottom-start",middleware:[d4(4),c4(),f4()],whileElementsMounted:i4});l4(Y,uu,t,s);const p=n.useCallback(r=>(B,au)=>{r?Z||D(!1):(Y?.blur(),(I||H)&&z?B&&au&&Ru(B,au)?z(au,B):z(B||void 0,au||void 0):su&&B&&su(B),D(!1))},[Y,su,z,I,H,Z]),E=n.useCallback(()=>{I||H?(()=>{(e||b)&&(e&&b&&Ru(e,b)?z(b,e):z(e,b))})():(()=>{if(su&&iu){const Lu=C||Du(new Date,{hours:0,minutes:0,seconds:0,milliseconds:0}),n4=Du(Lu,{hours:iu.getHours(),minutes:iu.getMinutes(),...U&&{seconds:iu.getSeconds()}});su(n4)}})(),xu()},[su,iu,C,U,e,b,I,H,z,xu]),d=n.useCallback(()=>{c?E():D(!0)},[c,E]),f=()=>A.jsx(Xu,{excludeRef:[{current:Y},$],onClickAway:()=>{Z||E()},children:A.jsx("div",{className:ku.opened,ref:w,style:{...a,visibility:i?"visible":"hidden"},"data-popper-placement":o,children:A.jsx(wu,{initialSelectedTimeFirst:e,initialSelectedTimeSecond:b,onChangeFirst:m,onChangeSecond:K,selectedTime:iu,selectedParts:Mu,onChange:Au,onPartsChange:vu,selectedPartsFirst:Fu,selectedPartsSecond:hu,onPartsChangeFirst:W,onPartsChangeSecond:Bu,isTimeWithSecondsType:U,isTimePeriodType:I,isTimePeriodWithSecondsType:H,disabled:lu,enabledHourFrom:N,enabledHourTo:O,enabledMinuteFrom:j,enabledMinuteTo:G,value:C,"data-ui-time-selector":!0})})}),F=()=>A.jsxs("div",{className:_u(ku.root,pu,cu.disabled&&ku.disabled,c&&ku.opened),id:String(l),"data-ui-timepicker":!0,children:[v&&[du.time,du.timeWithSeconds].includes(q)&&A.jsx("input",{type:"hidden",name:v,value:C?.toISOString()}),A.jsx(Hu,{ref:ou,value:C,valueFrom:e,valueTo:b,onChangeFirst:m,onChangeSecond:K,isTimeType:Cu,isTimeWithSecondsType:U,isTimePeriodType:I,isTimePeriodWithSecondsType:H,onChange:su,enabledHourFrom:N,enabledHourTo:O,enabledMinuteFrom:j,enabledMinuteTo:G,isOpenOnFocus:Z,onEnterKeyDown:p(!1),onTabKeyDown:p(!1),onBlur:p(!0),onFocus:Nu,colored:P,withIcon:nu,withPicker:ru,onToggle:d,iconRef:$,label:J,reset:y&&(I||H?!!(k||S):!!C),onReset:h,...cu,"data-ui-time-picker-input":!0}),c&&(V?s4.createPortal(f(),document.getElementById(x)):f())]});return _?A.jsx(r4,{label:J,children:u}):Z?A.jsx(Xu,{onClickAway:E,children:F()}):F()};try{t4.displayName="TimePicker",t4.__docgenInfo={description:"Компонент TimePicker для выбора времени в различных форматах.",displayName:"TimePicker",props:{id:{defaultValue:null,description:"Уникальный идентификатор компонента",name:"id",required:!1,type:{name:"string | number"}},type:{defaultValue:{value:"ETimePickerType.time"},description:"Тип пикера времени",name:"type",required:!1,type:{name:"enum",value:[{value:'"time"'},{value:'"period"'},{value:'"timeWithSeconds"'},{value:'"periodWithSeconds"'}]}},value:{defaultValue:null,description:"Выбранное значение времени",name:"value",required:!1,type:{name:"Date"}},onChange:{defaultValue:null,description:"Обработчик изменения выбранного времени",name:"onChange",required:!1,type:{name:"((date: Date) => void)"}},valueFrom:{defaultValue:null,description:"Начальное значение времени для периода",name:"valueFrom",required:!1,type:{name:"Date"}},valueTo:{defaultValue:null,description:"Конечное значение времени для периода",name:"valueTo",required:!1,type:{name:"Date"}},onPeriodChange:{defaultValue:null,description:"Обработчик изменения периода времени",name:"onPeriodChange",required:!1,type:{name:"((valueFrom?: Date, valueTo?: Date) => void) | undefined"}},enabledHourFrom:{defaultValue:null,description:"Функция для определения начального доступного часа",name:"enabledHourFrom",required:!1,type:{name:"((date: Date) => TEnabledHour)"}},enabledHourTo:{defaultValue:null,description:"Функция для определения конечного доступного часа",name:"enabledHourTo",required:!1,type:{name:"((date: Date) => TEnabledHour)"}},enabledMinuteFrom:{defaultValue:null,description:"Функция для определения начальной доступной минуты",name:"enabledMinuteFrom",required:!1,type:{name:"((date: Date) => number)"}},enabledMinuteTo:{defaultValue:null,description:"Функция для определения конечной доступной минуты",name:"enabledMinuteTo",required:!1,type:{name:"((date: Date) => number)"}},disabledPanel:{defaultValue:{value:"false"},description:"Флаг блокировки панели выбора",name:"disabledPanel",required:!1,type:{name:"boolean"}},portalContainerId:{defaultValue:{value:"root"},description:"ID рутового контейнера для создания портала",name:"portalContainerId",required:!1,type:{name:"string"}},withPortal:{defaultValue:{value:"false"},description:"Флаг использования портала для рендеринга",name:"withPortal",required:!1,type:{name:"boolean"}},isOpenOnFocus:{defaultValue:{value:"false"},description:"Флаг открытия пикера при фокусе",name:"isOpenOnFocus",required:!1,type:{name:"boolean"}},withIcon:{defaultValue:{value:"true"},description:"Флаг отображения иконки",name:"withIcon",required:!1,type:{name:"boolean"}},withPicker:{defaultValue:{value:"true"},description:"Флаг использования всплывающего пикера",name:"withPicker",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"Дополнительный CSS класс",name:"className",required:!1,type:{name:"string"}},onReset:{defaultValue:null,description:"Обработчик сброса значения",name:"onReset",required:!1,type:{name:"(() => void)"}},size:{defaultValue:null,description:"Размер инпута",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"s"'},{value:'"m"'}]}},color:{defaultValue:null,description:"Цвет инпута",name:"color",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"success"'},{value:'"error"'},{value:'"warning"'}]}},disabled:{defaultValue:null,description:"Флаг отключения инпута",name:"disabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"Имя инпута",name:"name",required:!1,type:{name:"string"}},reset:{defaultValue:null,description:"Флаг наличия кнопки сброса",name:"reset",required:!1,type:{name:"boolean"}},label:{defaultValue:{value:""},description:"Текст метки (label) инпута",name:"label",required:!1,type:{name:"string"}},multiline:{defaultValue:null,description:"Флаг многострочного режима",name:"multiline",required:!1,type:{name:"boolean"}},pseudo:{defaultValue:{value:"false"},description:"Флаг псевдо-инпута",name:"pseudo",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"Иконка инпута",name:"icon",required:!1,type:{name:"ReactNode"}},helperText:{defaultValue:null,description:"Вспомогательный текст",name:"helperText",required:!1,type:{name:"ReactNode"}},resize:{defaultValue:null,description:"Флаг возможности изменения размера (для textarea)",name:"resize",required:!1,type:{name:"boolean"}},colored:{defaultValue:{value:"false"},description:"Флаг цветного фона",name:"colored",required:!1,type:{name:"boolean"}},pseudoInputStyle:{defaultValue:null,description:"Инлайн стили для PseudoInput режима",name:"pseudoInputStyle",required:!1,type:{name:"CSSProperties"}}}}}catch{}export{t4 as T};
