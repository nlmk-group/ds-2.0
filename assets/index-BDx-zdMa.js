import{r as t,j as a,m as ou}from"./iframe-zk5xXBtA.js";import{c as iu}from"./colorsMapping-C6bFIk14.js";import{s as pu}from"./sizeMappingInput-XXScYzk1.js";import{A as du}from"./index-CyBWpxCb.js";import{I as cu}from"./index-BbV7Z3ze.js";import{c as X}from"./clsx-B-dksMZM.js";import{u as mu}from"./useFloatingReferenceSync-C6rFkWeV.js";import{L as fu}from"./index-DJ3skN8z.js";import{B as Eu}from"./index-cDYWclvM.js";import{T as Du}from"./index-9BCGLlQQ.js";import{I as yu}from"./index-1zUxKm4P.js";import{C as Fu}from"./index-CsA5WfEK.js";import{u as Bu,a as Su,o as Cu,f as Au,s as _u,l as hu}from"./floating-ui.react-0uHpbrLG.js";import{g as bu}from"./generateUUID-M57HTP56.js";const gu="SimpleSelect-module__select___wh-kT",xu="SimpleSelect-module__select__input___W6N4o",G={select:gu,select__input:xu,"input-helper":"SimpleSelect-module__input-helper___blA2Z"},vu=6,Y=4,tu=t.createContext(null),Iu=()=>{const l=t.useContext(tu);if(!l)throw new Error("useSelectContext must be used within SelectContext.Provider");return l},Vu="Options-module__options___NbluK",uu={options:Vu,"not-found-item":"Options-module__not-found-item___oBk3F"},qu={m:40,s:32,xs:32},wu=16,K=({children:l})=>{const{isOpen:o,inputRef:r,arrowButtonRef:V,menuWidth:q,withPortal:c,menuRef:m,portalContainerId:w,scrollingItems:O,setIsOpen:B,setFocusedIndex:S,focusedIndex:T,selectedOption:P,setSelectedOption:C,setSelectedLabel:A,size:f,clearSearchOnSelect:_,setSearchTerm:E,noOptionsText:R}=Iu(),[i,L]=t.useState(null),[h,M]=t.useState(!1),{refs:b,floatingStyles:N,placement:j}=Bu({placement:"bottom-start",middleware:[Cu(Y),Au({fallbackPlacements:["top-start"]}),_u({limiter:hu(),padding:Y})],whileElementsMounted:Su});mu(r,i,b,M);const k=document.getElementById(w);if(!o)return null;const W=()=>{o&&(B(!1),S(-1))},g=t.Children.map(l,(u,D)=>{if(t.isValidElement(u)&&typeof u.type!="string"){const y=u.props.label||(typeof u.props.children=="string"?u.props.children:""),p=P===u.props.value;return t.cloneElement(u,{isFocused:D===T,isSelected:p,size:f,onSelect:()=>{C(u.props.value),A(y),_&&E(""),B(!1)}})}return u})||[],H=()=>{const u=qu[f]||40;return{width:c?q||r.current?.offsetWidth:"100%",maxHeight:`${u*O+wu}px`,...N,visibility:h?"visible":"hidden"}},s=a.jsx(Fu,{onClickAway:W,excludeRef:[r,V],children:a.jsx(fu,{ref:u=>{u&&(m&&typeof m=="object"&&(m.current=u),L(u))},style:H(),className:uu.options,"data-popper-placement":j,"data-ui-select-options":!0,children:g.length>0?g:a.jsxs(Eu,{className:uu["not-found-item"],alignItems:"center",gap:8,flexDirection:"row","data-ui-select-no-options":!0,children:[a.jsx(yu,{name:"IconCancelOutlined16",containerSize:16,color:"error"}),a.jsx(Du,{variant:"Body1-Medium",color:"var(--steel-90)",children:R})]})})});return c?ou.createPortal(s,k):s};try{K.displayName="Options",K.__docgenInfo={description:"",displayName:"Options",props:{menuStyle:{defaultValue:null,description:"",name:"menuStyle",required:!1,type:{name:"CSSProperties"}},menuWidth:{defaultValue:null,description:"",name:"menuWidth",required:!1,type:{name:"Width<string | number>"}}}}}catch{}const eu=({value:l,onChange:o,id:r,name:V,portalContainerId:q="root",children:c,menuWidth:m,placeholder:w,label:O,withPortal:B=!1,disabled:S=!1,helperText:T,pseudo:P,onFocus:C,onBlur:A,color:f=iu.default,size:_=pu.m,scrollingItems:E=vu,noOptionsText:R="Ничего не найдено",searchable:i=!1,colored:L=!1,onEnterPress:h,reset:M,onReset:b,displayValue:N,clearSearchOnSelect:j=!1,className:k,style:W,inputStyle:g,...H})=>{const[s,u]=t.useState(!1),[D,y]=t.useState(""),[p,$]=t.useState(""),[x,F]=t.useState(-1),d=t.useRef(null),nu=t.useRef(null),Z=t.useRef(null);r=t.useMemo(()=>`Select-${r&&r.toString()||bu()}`,[r]),E<1&&(E=1,console.error("Scrollig items option shoud be at least 1, to show options dropdown correctly"));const v=t.Children.toArray(c).filter(e=>t.isValidElement(e));t.useEffect(()=>{y(Q(l))},[l,c]);const lu=()=>{u(!0),C?.()},au=()=>{A?.()},ru=e=>{e.preventDefault(),e.stopPropagation(),s?(u(!1),A?.(),d.current?.blur()):(u(!0),C?.(),d.current?.focus())},J=e=>{y(Q(e)),u(!1),F(-1),d.current?.blur(),o?.(e)},Q=e=>{if(e===void 0)return"";const n=v.find(I=>I.props.value===e);return n?n.props.label||(typeof n.props.children=="string"?n.props.children:""):""},U=t.useMemo(()=>!i||!p?v:v.filter(e=>e.props.label.toLowerCase().includes(p.toLowerCase())),[v,p,i]),z=U.length,su=e=>{if(!s){(e.key==="ArrowDown"||e.key==="ArrowUp")&&(u(!0),e.preventDefault());return}switch(e.key){case"ArrowDown":F(n=>(n+1)%z),e.preventDefault();break;case"ArrowUp":F(n=>{const I=n-1;return I<0?z-1:I}),e.preventDefault();break;case"Enter":if(x!==-1&&x<z){const n=U[x];n&&!n.props.disabled&&(J(n.props.value),h&&h(n.props.value))}e.preventDefault();break;case"Escape":u(!1),F(-1),e.preventDefault();break}};return a.jsx(tu.Provider,{value:{isOpen:s,setIsOpen:u,selectedOption:l,setSelectedOption:J,selectedLabel:D,setSelectedLabel:y,inputRef:d,menuRef:nu,arrowButtonRef:Z,menuWidth:m,withPortal:B,portalContainerId:q,scrollingItems:E,searchTerm:p,setSearchTerm:$,focusedIndex:x,setFocusedIndex:F,onChange:o,size:_,clearSearchOnSelect:j,noOptionsText:R},children:a.jsxs("div",{className:X(G.select,k),style:W,"data-ui-select":!0,children:[a.jsx(cu,{...H,id:r,helperText:T,name:V,size:_,inputRef:d,value:i&&s?p:N||D,label:O,placeholder:w,disabled:S,readOnly:!i||!s,pseudo:P,color:f,colored:L,reset:M&&!!l,onReset:()=>{b&&b(),o?.("")},icon:a.jsx(du,{isOpen:s,color:f,disabled:S,toggleDropdown:ru,buttonRef:Z}),onChange:e=>i&&$(e.target.value),onKeyDown:su,onFocus:lu,onBlur:au,className:X(G.select__input,G["input-helper"]),style:g,"data-ui-select-input":!0,"data-testid":"select-input"}),a.jsx(K,{menuStyle:{maxWidth:d.current?.offsetWidth},"data-ui-select-options":!0,children:U})]})})};try{eu.displayName="SimpleSelect",eu.__docgenInfo={description:"Компонент SimpleSelect представляет собой кастомизируемый выпадающий список с возможностью поиска.",displayName:"SimpleSelect",props:{size:{defaultValue:{value:"sizesMappingInput.m"},description:"Размер инпута",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"s"'},{value:'"m"'}]}},color:{defaultValue:{value:"customInputColors.default"},description:"Цвет инпута",name:"color",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"success"'},{value:'"error"'},{value:'"warning"'}]}},disabled:{defaultValue:{value:"false"},description:"Флаг отключения инпута",name:"disabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"Имя инпута",name:"name",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"Уникальный идентификатор инпута",name:"id",required:!1,type:{name:"string"}},onReset:{defaultValue:null,description:"Обработчик сброса значения",name:"onReset",required:!1,type:{name:"((() => void) & FormEventHandler<HTMLInputElement> & FormEventHandler<HTMLTextAreaElement>)"}},reset:{defaultValue:null,description:"Флаг наличия кнопки сброса",name:"reset",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"Текст метки (label) инпута",name:"label",required:!1,type:{name:"string"}},multiline:{defaultValue:null,description:"Флаг многострочного режима",name:"multiline",required:!1,type:{name:"boolean"}},pseudo:{defaultValue:null,description:"Флаг псевдо-инпута",name:"pseudo",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"Иконка инпута",name:"icon",required:!1,type:{name:"ReactNode"}},helperText:{defaultValue:null,description:"Вспомогательный текст",name:"helperText",required:!1,type:{name:"ReactNode"}},resize:{defaultValue:null,description:"Флаг возможности изменения размера (для textarea)",name:"resize",required:!1,type:{name:"boolean"}},colored:{defaultValue:{value:"false"},description:"Флаг цветного фона",name:"colored",required:!1,type:{name:"boolean"}},pseudoInputStyle:{defaultValue:null,description:"Инлайн стили для PseudoInput режима",name:"pseudoInputStyle",required:!1,type:{name:"CSSProperties"}},inputRef:{defaultValue:null,description:"Реф для доступа к DOM-элементу инпута",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement | HTMLTextAreaElement>"}},value:{defaultValue:null,description:"Текущее значение селекта",name:"value",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"Функция обработчик, вызывается при выборе нового значения",name:"onChange",required:!1,type:{name:"((value: string | number) => void)"}},onBlur:{defaultValue:null,description:"Обработчик закрытия меню options",name:"onBlur",required:!1,type:{name:"(() => void)"}},onFocus:{defaultValue:null,description:"Обработчик открытия меню options",name:"onFocus",required:!1,type:{name:"(() => void)"}},portalContainerId:{defaultValue:{value:"root"},description:"id рутового контейнера для создания портала",name:"portalContainerId",required:!1,type:{name:"string"}},menuWidth:{defaultValue:null,description:"Ширина меню селекта",name:"menuWidth",required:!1,type:{name:"string"}},withPortal:{defaultValue:{value:"false"},description:"Флаг, указывающий, должно ли меню рендериться в портале",name:"withPortal",required:!1,type:{name:"boolean"}},onEnterPress:{defaultValue:null,description:"Обработчик нажатия клавиши Enter",name:"onEnterPress",required:!1,type:{name:"((item: string | number) => void)"}},scrollingItems:{defaultValue:{value:"6"},description:"Количество элементов после которого включается прокрутка",name:"scrollingItems",required:!1,type:{name:"number"}},noOptionsText:{defaultValue:{value:"Ничего не найдено"},description:"Текст, отображаемый когда нет доступных опций",name:"noOptionsText",required:!1,type:{name:"string"}},searchable:{defaultValue:{value:"false"},description:"Флаг, указывающий, доступен ли поиск",name:"searchable",required:!1,type:{name:"boolean"}},clearSearchOnSelect:{defaultValue:{value:"false"},description:"Очищать поле поиска при выборе значения",name:"clearSearchOnSelect",required:!1,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"Кастомное отображаемое значение в инпуте (переопределяет автоматическое определение по label)",name:"displayValue",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Кастомные стили для самого селекта (контейнера)",name:"style",required:!1,type:{name:"CSSProperties"}},inputStyle:{defaultValue:null,description:"Кастомные стили для внутреннего Input компонента",name:"inputStyle",required:!1,type:{name:"CSSProperties"}}}}}catch{}export{eu as S};
