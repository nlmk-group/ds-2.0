import{r as l,j as n,R as v4,i as V4}from"./iframe-tXE4xoYc.js";import{c as x4}from"./colorsMapping-C6bFIk14.js";import{I as w4}from"./index-q3_oAMiW.js";import{I as D4}from"./index-BavAFXG7.js";import{c as s4}from"./clsx-B-dksMZM.js";import{u as q4}from"./useFloatingReferenceSync-BoqrGUtC.js";import{B as R}from"./index-Cx9ne2MY.js";import{T as f4}from"./index-IJbXH1LS.js";import{S as S4}from"./index-CZmf5b9z.js";import{C as T4}from"./index-mWxT_Pnt.js";import{M as R4}from"./index-BKRw2b1H.js";import{u as j4,a as N4,o as L4,f as k4,s as M4,l as P4}from"./floating-ui.react-rIU8UbdJ.js";import{L as H4}from"./index-D72bge1Z.js";import{T as O4}from"./index-BQHkH-Oh.js";const z4="Autocomplete-module__autocomplete___5vtE-",$4={autocomplete:z4},B4=l.createContext({isOpen:!1,disabled:!1,withPortal:!1,wrapperRef:{current:null},targetRef:{current:null},inputRef:{current:null},isLoading:!1,showCreateItem:!1,onCreateItem:()=>{},currentItems:[],inputValue:"",highlightedIndex:-1,selectedItems:[],createItemText:u=>`Добавить: ${u}`,onSelectMenuItem:()=>{},noResultsText:"",showTooltip:!1,renderLabel:void 0,portalContainerId:"root",totalText:"Всего:",showTotalCount:!0,showEmptyDropdown:!0,handleClickAway:()=>{}}),U4=({wrapperRef:u,targetRef:r,callback:s,canLoadMore:e,isPortalMounted:d})=>{let o=null;l.useEffect(()=>{const m=u.current,c=r.current;if(m&&c){const A={root:m,rootMargin:"10px",threshold:.5};o=new IntersectionObserver(([v])=>{if(v){const{isIntersecting:g}=v;g&&e&&s()}},A),o.observe(c)}return()=>{c&&o&&o.unobserve(c)}},[u,r,s,e,d])},K4=(u,r)=>{const s=l.useRef(r),e=l.useRef(null);l.useEffect(()=>{s.current=r},[r]);const d=l.useCallback((...c)=>{e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{s.current?.(...c)},u)},[u]),o=l.useCallback(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),m=l.useCallback(()=>{e.current&&(clearTimeout(e.current),e.current=null,s.current?.())},[]);return l.useEffect(()=>()=>{e.current&&clearTimeout(e.current)},[]),Object.assign(d,{cancel:o,flush:m})},W4="AutocompleteItem-module__item___ujtSA",Q4="AutocompleteItem-module__disabled___dh-8E",J4="AutocompleteItem-module__highlighted___ljVRT",z={item:W4,"item-position":"AutocompleteItem-module__item-position___e5ejo",disabled:Q4,highlighted:J4},$=({children:u,onClick:r,value:s,className:e,disabled:d=!1,hint:o="",highlighted:m=!1})=>{const c=A=>{A.stopPropagation(),!d&&r&&r(s)};return n.jsx(H4,{className:s4(z.item,e,{[z.disabled]:d},{[z.highlighted]:m}),onClick:c,role:"option","aria-disabled":d||void 0,children:n.jsx(R,{children:n.jsx(O4,{title:o,delayShow:500,children:n.jsx("div",{className:z["item-position"],children:u})})})})};try{$.displayName="AutocompleteItem",$.__docgenInfo={description:"Компонент AutocompleteItem представляет собой элемент списка меню, который может содержать иконку и текст.",displayName:"AutocompleteItem",props:{children:{defaultValue:null,description:"Содержимое элемента меню",name:"children",required:!0,type:{name:"ReactNode"}},onClick:{defaultValue:null,description:"Обработчик клика, вызываемый при выборе элемента",name:"onClick",required:!1,type:{name:"((value: string) => void)"}},value:{defaultValue:null,description:"Значение, связанное с элементом меню",name:"value",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Отключает возможность выбора элемента меню",name:"disabled",required:!1,type:{name:"boolean"}},hint:{defaultValue:{value:""},description:"Текст тултипа для элемента",name:"hint",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Дополнительный CSS-класс",name:"className",required:!1,type:{name:"string"}},highlighted:{defaultValue:{value:"false"},description:"Внутренний проп для подсветки текущего элемента при фокусе или наведении с клавиатуры",name:"highlighted",required:!1,type:{name:"boolean"}}}}}catch{}const X4="AutocompleteDropdown-module__card___gvOvS",Y4="AutocompleteDropdown-module__total___7VerO",q={card:X4,"menu-item":"AutocompleteDropdown-module__menu-item___Av4zz","not-found-item":"AutocompleteDropdown-module__not-found-item___Q30-F",total:Y4},U=(u,r)=>{if(!r||!u)return u;const s=new RegExp(`(${r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return u.split(s).map((d,o)=>d.toLowerCase()===r.toLowerCase()?n.jsx("b",{children:d},o):d)},j=(u,r)=>{if(!r)return u;if(Array.isArray(u))return u.map((s,e)=>n.jsx(v4.Fragment,{children:j(s,r)},e));if(typeof u=="string")return U(u,r);if(l.isValidElement(u)){const s=l.Children.map(u.props.children,e=>j(e,r));return l.cloneElement(u,{children:s})}return u};try{U.displayName="boldString",U.__docgenInfo={description:"Выделяет жирным шрифтом части строки, соответствующие поисковому запросу",displayName:"boldString",props:{}}}catch{}try{j.displayName="boldReactElement",j.__docgenInfo={description:`Рекурсивно обрабатывает React элементы и их дочерние элементы,
выделяя жирным шрифтом части текста, соответствующие поисковому запросу`,displayName:"boldReactElement",props:{}}}catch{}const o4=({className:u,style:r})=>{const{portalContainerId:s,isOpen:e,withPortal:d,inputRef:o,wrapperRef:m,isLoading:c,showCreateItem:A,onCreateItem:v,currentItems:g,inputValue:F,highlightedIndex:p,selectedItems:K=[],createItemText:N,onSelectMenuItem:W,noResultsText:L,targetRef:f,showTooltip:Q,renderLabel:S,totalText:k,showTotalCount:M,showEmptyDropdown:J,handleClickAway:X}=l.useContext(B4),[Y,Z]=l.useState(null),[G,P]=l.useState(!1),u4=document.getElementById(s),{refs:e4,floatingStyles:t4,placement:_}=j4({placement:"bottom-start",middleware:[L4(4),k4({fallbackPlacements:["top-start"]}),M4({limiter:P4(),padding:8})],whileElementsMounted:N4});if(q4(o,Y,e4,P),l.useEffect(()=>{if(p<0)return;const a=m.current?.querySelectorAll(`.${q["menu-item"]}`);a&&a[p]&&a[p].scrollIntoView({block:"nearest"})},[p]),!e)return null;const I=o?.current?.getBoundingClientRect(),E=()=>({width:I?.width,...t4,visibility:G?"visible":"hidden"}),C=(g??[]).length>0,h=n.jsx(T4,{onClickAway:X,excludeRef:o,children:n.jsxs("div",{ref:a=>{a&&(m&&typeof m=="object"&&(m.current=a),Z(a))},className:s4(q.card,u),style:{...E(),...r},"data-popper-placement":_,"data-ui-autocomplete-dropdown":!0,children:[!c&&n.jsxs(R,{flexDirection:"column",gap:0,"data-ui-autocomplete-content":!0,children:[A&&F&&n.jsx($,{className:q["menu-item"],onClick:()=>v?.(F),value:F,highlighted:p===0,"data-ui-autocomplete-create-item":!0,children:N?.(F)??`Добавить: ${F}`},"__create_item__"),C?n.jsxs(n.Fragment,{children:[M&&n.jsxs(f4,{className:q.total,variant:"Caption-Medium",color:"var(--steel-90)","data-ui-autocomplete-total":!0,children:[k," ",g?.length]}),g?.map((a,D)=>{if(!a.label)return null;const H=F.trim(),y=S?j(S(a),H):U(a.label||"",H),B=a.disabled||!!K?.some(V=>V.value===a.value);return n.jsx($,{disabled:B,className:q["menu-item"],onClick:()=>W?.(a),value:a.name||"",highlighted:D===p,hint:Q?a.label:"","data-ui-autocomplete-item":!0,children:y},a.id)})]}):J&&n.jsx(R,{flexDirection:"column","data-ui-autocomplete-empty":!0,children:n.jsxs(R,{gap:8,flexDirection:"row",className:q["not-found-item"],alignItems:"center","data-ui-autocomplete-no-results":!0,children:[n.jsx(D4,{color:"error",name:"IconCancelOutlined16",containerSize:16}),n.jsx(f4,{variant:"Body1-Medium",color:"var(--steel-90)",children:L??"Ничего не найдено"})]})})]}),c&&n.jsx(R4,{label:n.jsx(R,{"data-testid":"AUTOCOMPLETE_LOADING",justifyContent:"center","data-ui-autocomplete-loading":!0,children:n.jsx(S4,{})}),value:"",disabled:!0}),n.jsx("div",{ref:a=>{a&&f&&typeof f=="object"&&(f.current=a)}})]})});return d?V4.createPortal(h,u4):h};try{o4.displayName="AutocompleteDropdown",o4.__docgenInfo={description:"",displayName:"AutocompleteDropdown",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}}}catch{}const E4=({selected:u,items:r=[],isLoading:s=!1,nameGetter:e,renderLabel:d,disabled:o=!1,onChange:m,onFullItemSelect:c,noSelectionItem:A,onDebouncedInputChange:v,size:g,showTooltip:F=!1,readOnly:p=!1,helperText:K="",error:N=!1,isFullWidth:W=!1,withPortal:L=!1,onLoadOptions:f,portalContainerId:Q="root",canLoadMore:S=!1,onLoadMore:k,onCreateItem:M,noResultsText:J="Ничего не найдено",createItemText:X=_=>`Добавить: ${_}`,totalText:Y="Всего:",showTotalCount:Z=!0,debounceDelay:G=500,showEmptyDropdown:P=!0,className:u4,style:e4,...t4})=>{const[_,I]=l.useState([]),[E,C]=l.useState(""),[h,a]=l.useState(r??[]),[D,H]=l.useState(r),[y,B]=l.useState(!1),[V,O]=l.useState(-1),[b,x]=l.useState(!1),i4=l.useRef(null),c4=l.useRef(null),a4=l.useRef(null),l4=K4(G,t=>{v?.(t),f&&f(t)});l.useEffect(()=>{u?(I([u]),b||C(e(u))):b||(I([]),C(""))},[u,e,b]),l.useEffect(()=>{if(r&&!s){const t=r.filter(i=>i.id!==void 0&&Number(i.id)>=0||Number.isNaN(Number(i.id)));H(t),a(b?d4(t,E,e):t),O(-1)}},[r,s,E,e,b]);const C4=l.useCallback(t=>{if(!D)return e(t);const i=D.find(w=>w.id===t.value);return e(t,i)},[D,e]),d4=(t,i,w)=>{const r4=i.trim().toLowerCase();return t.filter(T=>(T.label||w(T)||"").trim().toLowerCase().includes(r4)).map(T=>({...T,label:w(T).trim()}))},h4=({target:{value:t}})=>{p||(C(t),x(!0),B(!0),t.trim()?(a(d4(D??[],t,e)),l4(t)):(I([]),m(A??void 0),c?.(void 0),f&&(l4.cancel(),f("")),a([])))},m4=t=>{const i=C4(t);if(c){const w=D?.find(r4=>r4.id===t.value);c(w??t)}I([t]),C(i),x(!1),m(t),a4.current?.focus(),B(!1)},n4=()=>{C(""),I([]),x(!1),m(A??void 0),c?.(void 0),f&&(l4.cancel(),f("")),B(!1),a([])},A4=()=>{B(!1),b&&(u?(C(e(u)),x(!1),a(D??[])):E.trim()?x(!1):n4())},F4=()=>{!p&&!o&&(B(!0),b||a(D??[]))},y4=t=>{if(!(p||o))switch(t.key){case"ArrowDown":t.preventDefault(),y?O(i=>i<h.length-1?i+1:i):(B(!0),O(0));break;case"ArrowUp":t.preventDefault(),y&&O(i=>i>0?i-1:i);break;case"Enter":t.preventDefault(),y&&V>=0&&h[V]&&m4(h[V]);break;case"Escape":if(t.preventDefault(),y){B(!1);const i=_[0];i&&(C(e(i)),x(!1),a(D??[]))}break;case"Backspace":!E&&_.length>0&&n4();break}};U4({wrapperRef:i4,targetRef:c4,callback:()=>{k&&S&&k()},canLoadMore:S,isPortalMounted:L});const g4=h?.some(t=>t.label?.trim().toLowerCase()===E.trim().toLowerCase()),p4=M&&E.trim()!==""&&!g4,_4=(h??[]).length>0,I4=y&&!o&&!p&&(P||_4||p4||s),b4=n.jsx(o4,{});return n.jsx(B4.Provider,{value:{isOpen:y,disabled:o,portalContainerId:Q,withPortal:L,inputRef:a4,wrapperRef:i4,targetRef:c4,isLoading:s,showCreateItem:p4,onCreateItem:M,currentItems:h,inputValue:E,highlightedIndex:V,selectedItems:_,createItemText:X,onSelectMenuItem:m4,noResultsText:J,showTooltip:F,renderLabel:d,totalText:Y,showTotalCount:Z,showEmptyDropdown:P,handleClickAway:A4},children:n.jsxs("div",{className:s4($4.autocomplete,u4),style:{width:W?"100%":"auto",...e4},"data-ui-autocomplete":!0,children:[n.jsx(w4,{...t4,inputRef:a4,value:E,onKeyDown:y4,icon:n.jsx(D4,{name:"IconSearchOutlined24",color:o&&"disabled"||N&&"error"||"primary","data-ui-autocomplete-search":!0}),reset:!0,onReset:n4,size:g,disabled:o,color:N?x4.error:void 0,helperText:K,onFocus:()=>{!o&&!p&&B(!0)},onClick:F4,onChange:h4,"data-ui-autocomplete-input":!0,"data-testid":"AUTOCOMPLETE_INPUT"}),I4&&b4]})})};try{E4.displayName="Autocomplete",E4.__docgenInfo={description:"Компонент Autocomplete предоставляет пользователю возможность ввода текста с поддержкой автозаполнения на основе предложенных элементов.",displayName:"Autocomplete",props:{selected:{defaultValue:null,description:"Изначально выбранный элемент",name:"selected",required:!1,type:{name:"IAutocompleteValue"}},items:{defaultValue:{value:"[]"},description:"Массив элементов для автозаполнения",name:"items",required:!1,type:{name:"IAutocompleteValue[] | null"}},isLoading:{defaultValue:{value:"false"},description:"Состояние загрузки данных",name:"isLoading",required:!1,type:{name:"boolean"}},nameGetter:{defaultValue:null,description:"Функция для получения строки, которая будет отображаться пользователю",name:"nameGetter",required:!0,type:{name:"(item: IAutocompleteValue, fullDataItem?: any) => string"}},renderLabel:{defaultValue:null,description:"Кастомный рендер label для опций",name:"renderLabel",required:!1,type:{name:"((item: IAutocompleteValue) => ReactNode)"}},onChange:{defaultValue:null,description:"Колбэк при выборе/очистке элемента",name:"onChange",required:!0,type:{name:"(item?: IAutocompleteValue | undefined) => void"}},onFullItemSelect:{defaultValue:null,description:"Колбэк для получения полного объекта выбранного элемента",name:"onFullItemSelect",required:!1,type:{name:"((item?: any) => void)"}},onDebouncedInputChange:{defaultValue:null,description:"Колбэк, вызываемый после завершения ввода (с задержкой debounce)",name:"onDebouncedInputChange",required:!1,type:{name:"((value: string) => void)"}},disabled:{defaultValue:{value:"false"},description:"Отключить ввод и выбор",name:"disabled",required:!1,type:{name:"boolean"}},helperText:{defaultValue:{value:""},description:"Сообщение об ошибке",name:"helperText",required:!1,type:{name:"string"}},error:{defaultValue:{value:"false"},description:"Флаг состояния ошибки",name:"error",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:'Значение, которое будет считаться "пустым"',name:"noSelectionItem",required:!1,type:{name:"IAutocompleteValue"}},showTooltip:{defaultValue:{value:"false"},description:"Показывать ли tooltip при наведении на опции",name:"showTooltip",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"Только для чтения",name:"readOnly",required:!1,type:{name:"boolean"}},isFullWidth:{defaultValue:{value:"false"},description:"Занимать полную ширину",name:"isFullWidth",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Placeholder для поля ввода",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Подпись для поля ввода",name:"label",required:!1,type:{name:"string"}},withPortal:{defaultValue:{value:"false"},description:"Рендерить выпадающее меню через портал",name:"withPortal",required:!1,type:{name:"boolean"}},portalContainerId:{defaultValue:{value:"root"},description:"ID контейнера для портала",name:"portalContainerId",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"xs"'},{value:'"m"'}]}},onLoadOptions:{defaultValue:null,description:"Колбэк для запроса новых данных при вводе",name:"onLoadOptions",required:!1,type:{name:"((query: string) => void)"}},canLoadMore:{defaultValue:{value:"false"},description:"Можно ли загрузить больше данных",name:"canLoadMore",required:!1,type:{name:"boolean"}},onLoadMore:{defaultValue:null,description:"Колбэк для догрузки данных при скролле",name:"onLoadMore",required:!1,type:{name:"(() => void)"}},onCreateItem:{defaultValue:null,description:"Колбэк для создания нового элемента",name:"onCreateItem",required:!1,type:{name:"((value: string) => void)"}},noResultsText:{defaultValue:{value:"Ничего не найдено"},description:"Текст при отсутствии результатов",name:"noResultsText",required:!1,type:{name:"string"}},createItemText:{defaultValue:{value:"(value: string) => `Добавить: ${value}`"},description:"Функция для генерации текста кнопки создания элемента",name:"createItemText",required:!1,type:{name:"((value: string) => string)"}},totalText:{defaultValue:{value:"Всего:"},description:"Текст для отображения общего количества элементов",name:"totalText",required:!1,type:{name:"string"}},debounceDelay:{defaultValue:{value:"500"},description:"Задержка в миллисекундах для debounce при вводе",name:"debounceDelay",required:!1,type:{name:"number"}},showTotalCount:{defaultValue:{value:"true"},description:"Показывать ли общее количество элементов",name:"showTotalCount",required:!1,type:{name:"boolean"}},showEmptyDropdown:{defaultValue:{value:"true"},description:"Показывать ли дропдаун при отсутствии результатов",name:"showEmptyDropdown",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"Дополнительный CSS класс",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Inline стили для кастомизации компонента",name:"style",required:!1,type:{name:"CSSProperties"}},name:{defaultValue:null,description:"Имя инпута",name:"name",required:!1,type:{name:"string"}},reset:{defaultValue:null,description:"Флаг наличия кнопки сброса",name:"reset",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"Значение инпута",name:"value",required:!1,type:{name:"string | (string & readonly string[])"}},id:{defaultValue:null,description:"Уникальный идентификатор инпута",name:"id",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"Обработчик потери фокуса",name:"onBlur",required:!1,type:{name:"(ChangeEventHandler<HTMLInputElement | HTMLTextAreaElement> & FocusEventHandler<HTMLInputElement> & FocusEventHandler<...>)"}},onReset:{defaultValue:null,description:"Обработчик сброса значения",name:"onReset",required:!1,type:{name:"((() => void) & FormEventHandler<HTMLInputElement> & FormEventHandler<HTMLTextAreaElement>)"}},multiline:{defaultValue:null,description:"Флаг многострочного режима",name:"multiline",required:!1,type:{name:"boolean"}},pseudo:{defaultValue:null,description:"Флаг псевдо-инпута",name:"pseudo",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"Иконка инпута",name:"icon",required:!1,type:{name:"ReactNode"}},resize:{defaultValue:null,description:"Флаг возможности изменения размера (для textarea)",name:"resize",required:!1,type:{name:"boolean"}},colored:{defaultValue:null,description:"Флаг цветного фона",name:"colored",required:!1,type:{name:"boolean"}},pseudoInputStyle:{defaultValue:null,description:"Инлайн стили для PseudoInput режима",name:"pseudoInputStyle",required:!1,type:{name:"CSSProperties"}},inputRef:{defaultValue:null,description:"Реф для доступа к DOM-элементу инпута",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement | HTMLTextAreaElement>"}}}}}catch{}export{E4 as A};
