# Scripts Documentation

## generateExports.mjs

### Назначение

Автоматическая генерация секции `exports` в `package.json` на основе структуры компонентов в директории `src/components/`.

### Зачем нужен

При публикации библиотеки в npm, секция `exports` в `package.json` определяет, какие модули доступны для импорта. Ручное поддержание этого списка при добавлении/удалении компонентов:

- ❌ Требует много времени
- ❌ Подвержено ошибкам (легко забыть добавить компонент)
- ❌ Увеличивает риск несоответствия между кодом и exports

**Скрипт решает эти проблемы автоматизацией.**

### Что делает

1. Сканирует директорию `src/components/`
2. Для каждого компонента создает два типа экспортов:
   - **Named export**: `"./ComponentName"`
   - **Wildcard export**: `"./*"` (для гибкости)
3. Добавляет экспорты для CSS и шрифтов
4. Обновляет `package.json`

### Пример результата

```json
{
  "exports": {
    ".": {
      "import": "./lib/index.js",
      "types": "./lib/index.d.ts"
    },
    "./Button": {
      "import": "./lib/Button/index.js",
      "types": "./lib/Button/index.d.ts"
    },
    "./Input": {
      "import": "./lib/Input/index.js",
      "types": "./lib/Input/index.d.ts"
    },
    "./*": {
      "import": "./lib/*/index.js",
      "types": "./lib/*/index.d.ts"
    },
    "./css/*": "./lib/css/*",
    "./fonts/*": "./lib/fonts/*"
  }
}
```

### Использование

```bash
# Запустить вручную
node script/generateExports.mjs

# Интегрировать в процесс сборки
yarn generate:exports
```

### Когда запускать

- ✅ После добавления нового компонента
- ✅ Перед сборкой библиотеки (`yarn build`)
- ✅ Перед публикацией (`yarn packing`)

### Преимущества

| Критерий            | Ручное   | Автоматическое |
| ------------------- | -------- | -------------- |
| **Время**           | 5-10 мин | 1-10 сек       |
| **Ошибки**          | Возможны | Исключены      |
| **Поддержка**       | Сложно   | Легко          |
| **Консистентность** | ⚠️ Риск  | ✅ Гарантия    |

### Требования

- Node.js 16+
- Структура проекта: `src/components/ComponentName/index.tsx`

### Ограничения

- Работает только с компонентами в `src/components/`
- Предполагает стандартную структуру: `ComponentName/index.tsx`
- CSS и шрифты экспортируются как wildcard
