#!/bin/bash

echo "ğŸš€ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ NLMK DS 2.0..."

yarn convert:dark-theme-tokens

rm -rf lib cache

# ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ ÑĞ±Ğ¾Ñ€ĞºĞ° Ñ Vite (Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ JS, CSS Ğ¸ Ñ‚Ğ¸Ğ¿Ñ‹)
BUILD_MODE=lib yarn vite build

# ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
echo "ğŸ“¦ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²..."
mkdir -p lib/css lib/fonts

# ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ CSS Ğ¸ ÑˆÑ€Ğ¸Ñ„Ñ‚Ñ‹
cp -r public/css/* lib/css/ 2>/dev/null || true
cp -r public/fonts/* lib/fonts/ 2>/dev/null || true

# Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ CSS Ñ„Ğ°Ğ¹Ğ»
cat > lib/css/main.css << 'EOF'
/* NLMK DS 2.0 Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ */
@import './tokens/old-colour-shadow.css';
@import './tokens/main-color-light.css';
@import './tokens/spacing.css';
@import './tokens/sizing.css';
@import './tokens/opacity.css';
@import './tokens/radius.css';
@import './temp-variables.css';
@import './tokens/main-typography.css';
@import './tokens/desktop/typo/main-typography.css';
@import './tokens/desktop/color/main-color-light.css';
@import './tokens/light-tokens.css';
@import './tokens/typography-tokens.css';
@import './dark-theme-storybook.css';
EOF

# ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ñ‚Ğ¾Ñ‡ĞµĞº Ğ²Ñ…Ğ¾Ğ´Ğ°
node script/entryPoints.js

echo "âœ… Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!"